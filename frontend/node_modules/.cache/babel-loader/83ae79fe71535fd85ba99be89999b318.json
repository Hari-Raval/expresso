{"ast":null,"code":"import _regeneratorRuntime from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Header,Grid,Dimmer,Loader,Divider}from'semantic-ui-react';import ClientHeader from'./ClientHeader';import{getHistory}from'../Axios/axios_getter';var CustomerHistory=/*#__PURE__*/function(_React$Component){_inherits(CustomerHistory,_React$Component);function CustomerHistory(){var _getPrototypeOf2;var _this;_classCallCheck(this,CustomerHistory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CustomerHistory)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={history:[],shoppingCart:[],loading:false,user:null};_this.componentDidMount=function(){_this.setState({loading:true});setTimeout(_this.getHistory,1000);_this.intervalId=setInterval(_this.getHistory,10000);if(JSON.parse(localStorage.getItem('shoppingCart'))!==null){_this.setState({shoppingCart:JSON.parse(localStorage.getItem('shoppingCart'))});}if(JSON.parse(localStorage.getItem('user'))!==null){_this.setState({user:JSON.parse(localStorage.getItem('user'))});}};_this.componentWillUnmount=function(){clearInterval(_this.intervalId);};_this.getHistory=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getHistory(_this.state.user,JSON.parse(localStorage.getItem('token'))).then(function(history){_this.setState({history:history});}).catch(function(error){console.log(error);});case 2:_this.setState({loading:false});case 3:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(CustomerHistory,[{key:\"render\",value:function render(){var history=this.state.history;var showHistory=history.length===0?React.createElement(Header,{as:\"h3\"},\"No Orders!\"):React.createElement(React.Fragment,null,history.map(function(history){var paymentType=history.payment?\"Student Charge\":\"In-Store\";return React.createElement(Grid.Row,{verticalAlign:\"middle\"},React.createElement(Grid.Column,{width:\"2\"}),React.createElement(Grid.Column,{width:\"2\"},React.createElement(\"p\",null,history.time)),React.createElement(Grid.Column,{width:\"8\"},history.item.map(function(subitem){return React.createElement(React.Fragment,null,React.createElement(\"h2\",{style:{margin:'0'}},subitem),React.createElement(Divider,null));})),React.createElement(Grid.Column,{width:\"1\"},React.createElement(\"h3\",null,'$'+history.cost.toFixed(2))),React.createElement(Grid.Column,{width:\"2\"},React.createElement(\"p\",null,paymentType)),React.createElement(Grid.Column,{width:\"1\"}));}));return React.createElement(React.Fragment,null,React.createElement(ClientHeader,{history:this.props.history,shoppingCart:this.state.shoppingCart}),React.createElement(\"div\",{style:{height:'12vh'}}),React.createElement(Dimmer,{active:this.state.loading,inverted:true,page:true},React.createElement(Loader,{inverted:true},\"Loading\")),React.createElement(Grid,{stackable:true,divided:\"vertically\",textAlign:\"center\"},React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(\"h2\",null,\"Account History\"))),showHistory));}}]);return CustomerHistory;}(React.Component);export default CustomerHistory;","map":{"version":3,"sources":["/Users/spoiledhua/Desktop/expresso/frontend/src/Components/ClientHistory.js"],"names":["React","Header","Grid","Dimmer","Loader","Divider","ClientHeader","getHistory","CustomerHistory","state","history","shoppingCart","loading","user","componentDidMount","setState","setTimeout","intervalId","setInterval","JSON","parse","localStorage","getItem","componentWillUnmount","clearInterval","then","catch","error","console","log","showHistory","length","map","paymentType","payment","time","item","subitem","margin","cost","toFixed","props","height","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Header, Grid, Dimmer, Loader, Divider } from 'semantic-ui-react';\n\nimport ClientHeader from './ClientHeader';\n\nimport { getHistory } from '../Axios/axios_getter'\n\nclass CustomerHistory extends React.Component {\n\n  state = {\n    history: [],\n    shoppingCart: [],\n    loading: false,\n    user: null\n  }\n\n  componentDidMount = () => {\n    this.setState({ loading: true });\n    setTimeout(this.getHistory, 1000);\n    this.intervalId = setInterval(this.getHistory, 10000);\n    if (JSON.parse(localStorage.getItem('shoppingCart')) !== null) {\n      this.setState({ shoppingCart: JSON.parse(localStorage.getItem('shoppingCart'))});\n    }\n    if (JSON.parse(localStorage.getItem('user')) !== null) {\n      this.setState({ user: JSON.parse(localStorage.getItem('user'))});\n    }\n  }\n\n  componentWillUnmount = () => {\n    clearInterval(this.intervalId);\n  }\n\n  getHistory = async () => {\n    await getHistory(this.state.user, JSON.parse(localStorage.getItem('token')))\n      .then(history => {\n        this.setState({ history: history });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n    this.setState({ loading: false });\n  }\n\n  render() {\n\n    const { history } = this.state;\n\n    let showHistory = (history.length === 0) ?\n    <Header as='h3'>\n      No Orders!\n    </Header> :\n\n    <React.Fragment>\n      {history.map(history => {\n        let paymentType = (history.payment) ? \"Student Charge\" : \"In-Store\";\n        return (\n          <Grid.Row verticalAlign='middle'>\n            <Grid.Column width='2'></Grid.Column>\n            <Grid.Column width='2'>\n              <p>{history.time}</p>\n            </Grid.Column>\n            <Grid.Column width='8'>\n              {history.item.map(subitem => {\n                return (\n                  <React.Fragment>\n                    <h2 style={{margin: '0'}}>{subitem}</h2>\n                    <Divider />\n                  </React.Fragment>\n                )\n              })}\n            </Grid.Column>\n            <Grid.Column width='1'>\n              <h3>{'$' + history.cost.toFixed(2)}</h3>\n            </Grid.Column>\n            <Grid.Column width='2'>\n              <p>{paymentType}</p>\n            </Grid.Column>\n            <Grid.Column width='1'></Grid.Column>\n          </Grid.Row>\n        )\n      })}\n    </React.Fragment>\n\n      return (\n          <React.Fragment>\n            <ClientHeader history={this.props.history} shoppingCart={this.state.shoppingCart}/>\n            <div style={{ height: '12vh' }} />\n            <Dimmer active={this.state.loading} inverted page>\n              <Loader inverted>Loading</Loader>\n            </Dimmer>\n            <Grid stackable divided='vertically' textAlign='center'>\n              <Grid.Row>\n                <Grid.Column>\n                  <h2>Account History</h2>\n                </Grid.Column>\n              </Grid.Row>\n              {showHistory}\n            </Grid>\n          </React.Fragment>\n\n        );\n    }\n}\n\nexport default CustomerHistory;\n"]},"metadata":{},"sourceType":"module"}