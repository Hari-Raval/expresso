{"ast":null,"code":"import _regeneratorRuntime from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Card,Container,Header,Grid,Button,Radio,Form,Divider,Dimmer,Loader,Dropdown}from'semantic-ui-react';import ClientHeader from'./ClientHeader';import{postMakeOrder,getUser,getStoreStatus}from'../Axios/axios_getter';var OrderPage=/*#__PURE__*/function(_React$Component){_inherits(OrderPage,_React$Component);function OrderPage(){var _getPrototypeOf2;var _this;_classCallCheck(this,OrderPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(OrderPage)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={user:null,chargeEligible:null,availabilityConfirm:false,outOfStock:null,payment:true,totalPrice:0,shoppingCart:[],toBeRemoved:null,emptyPopUp:false,eligibilityPopUp:false,confirm:false,remove:false,place:false,storeStatus:false,storeStatusPopUp:false,timePopUp:false,time:null,loading:false};_this.componentDidMount=function(){_this.setState({loading:true});setTimeout(_this.setInitial,1000);};_this.setInitial=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(JSON.parse(localStorage.getItem('shoppingCart'))!==null)){_context.next=3;break;}_context.next=3;return _this.setState({shoppingCart:JSON.parse(localStorage.getItem('shoppingCart'))});case 3:_this.setState({totalPrice:_this.getPrice()});_context.next=6;return getUser(JSON.parse(localStorage.getItem('token'))).then(function(user){_this.setState({user:user.user});_this.setState({chargeEligible:user.charge_eligible});});case 6:_context.next=8;return getStoreStatus(JSON.parse(localStorage.getItem('token'))).then(function(data){_this.setState({storeStatus:data.status});});case 8:_this.setState({loading:false});case 9:case\"end\":return _context.stop();}}},_callee);}));_this.getPrice=function(){var shoppingCart=_this.state.shoppingCart;var price=0;for(var i=0;i<shoppingCart.length;i++){price+=Number(shoppingCart[i].sp[1]);for(var j=0;j<shoppingCart[i].addons.length;j++){price+=Number(shoppingCart[i].addons[j].price);}}return price;};_this.handleFilterItem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.setState({loading:true});case 2:_context2.next=4;return _this.setState(function(prevState){var shoppingCart=prevState.shoppingCart;shoppingCart=shoppingCart.filter(function(item){return item.id!==id;});return{shoppingCart:shoppingCart};});case 4:_context2.next=6;return _this.setState({loading:false});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleRemoveItem=function(id){_this.setState({toBeRemoved:id});_this.setState({remove:true});};_this.handleConfirmRemove=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.handleFilterItem(_this.state.toBeRemoved);case 2:_this.setState({totalPrice:_this.getPrice()});localStorage.setItem('shoppingCart',JSON.stringify(_this.state.shoppingCart));_this.handleCloseConfirmRemove();case 5:case\"end\":return _context3.stop();}}},_callee3);}));_this.emptyCart=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.setState({shoppingCart:[]});case 2:localStorage.setItem('shoppingCart',JSON.stringify(_this.state.shoppingCart));case 3:case\"end\":return _context4.stop();}}},_callee4);}));_this.selectPayment=function(payment){_this.setState({payment:payment});};_this.handlePlaceOrder=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var orderTime,orderTimeSplit,currentTime;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this.setState({loading:true});_context5.next=3;return getStoreStatus(JSON.parse(localStorage.getItem('token'))).then(function(data){_this.setState({storeStatus:data.status});});case 3:if(_this.state.shoppingCart.length===0){_this.setState({emptyPopUp:true});_this.handleCloseConfirm();}else if(_this.state.time===null){_this.setState({timePopUp:true});_this.handleCloseConfirm();}else{if(_this.state.time!=='Now'){orderTime=new Date();orderTimeSplit=_this.state.time.split(':');if(orderTimeSplit[0]<5){orderTimeSplit[0]=Number(orderTimeSplit[0])+12;orderTimeSplit[0]=orderTimeSplit[0].toString();}orderTime.setHours(orderTimeSplit[0],orderTimeSplit[1],0);currentTime=new Date();if(orderTime<=currentTime){_this.setState({invalidTime:true});_this.handleCloseConfirm();}else{if(!_this.state.chargeEligible&&_this.state.payment){_this.setState({eligibilityPopUp:true});_this.handleCloseConfirm();}else if(!_this.state.storeStatus){_this.setState({storeStatusPopUp:true});_this.handleCloseConfirm();}else{_this.setState({confirm:true});}}}else{if(!_this.state.chargeEligible&&_this.state.payment){_this.setState({eligibilityPopUp:true});_this.handleCloseConfirm();}else if(!_this.state.storeStatus){_this.setState({storeStatusPopUp:true});_this.handleCloseConfirm();}else{_this.setState({confirm:true});}}}_this.setState({loading:false});case 5:case\"end\":return _context5.stop();}}},_callee5);}));_this.postOrder=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(payment){var shoppingCart,items,i,item,addons,j,addon,update,time,hours,timeValue,finalUpdate;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:shoppingCart=_this.state.shoppingCart;_context6.next=3;return _this.setState({loading:true});case 3:items=[];for(i=0;i<shoppingCart.length;i++){item=shoppingCart[i];addons=[];for(j=0;j<item.addons.length;j++){addon={name:item.addons[j].name};addons.push(addon);}update={item:{name:item.item.name},addons:addons,sp:item.sp[0]};items.push(update);}time=_this.state.time;if(time!=='Now'){time=time.split(':');hours=Number(time[0]);if(hours<=5){timeValue=\"\"+(hours+12);}else{timeValue=\"\"+hours;}timeValue+=':'+time[1];time=timeValue;}finalUpdate={netid:_this.state.user,cost:_this.getPrice(),payment:payment,status:payment,items:items,time:time};postMakeOrder(_this.state.user,finalUpdate,JSON.parse(localStorage.getItem('token'))).then(function(data){if(!data.availability){_this.setState({availabilityConfirm:true});_this.setState({outOfStock:data.item});}else{_this.emptyCart();_this.setState({totalPrice:_this.getPrice()});_this.setState({place:true});}});_this.setState({loading:false});case 10:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x2){return _ref6.apply(this,arguments);};}();_this.handleConfirm=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_this.setState({loading:true});_context7.next=3;return _this.postOrder(_this.state.payment);case 3:_context7.next=5;return _this.handleCloseConfirm();case 5:_this.setState({loading:false});case 6:case\"end\":return _context7.stop();}}},_callee7);}));_this.handleConfirmPlace=function(){_this.setState({place:true});};_this.handleCloseConfirmPlace=function(){_this.setState({place:false});_this.props.history.push('/menu');};_this.handleCloseEmpty=function(){_this.setState({emptyPopUp:false});};_this.handleCloseEligibility=function(){_this.setState({eligibilityPopUp:false});};_this.handleCloseConfirm=function(){_this.setState({confirm:false});};_this.handleCloseAvailability=function(){_this.setState({availabilityConfirm:false});_this.setState({outOfStock:null});};_this.handleCloseConfirmRemove=function(){_this.setState({toBeRemoved:null});_this.setState({remove:false});};_this.handleCloseStoreClosed=function(){_this.setState({storeStatusPopUp:false});};_this.handleCloseTime=function(){_this.setState({timePopUp:false});};_this.handleChangeTime=function(e,_ref8){var value=_ref8.value;_this.setState({time:value});};_this.handleCloseInvalidTime=function(){_this.setState({invalidTime:false});};return _this;}_createClass(OrderPage,[{key:\"render\",value:function render(){var _this2=this;var options=[{key:'Now',value:'Now',text:'Now'},{key:'10:00 AM',value:'10:00',text:'10:00 AM'},{key:'10:15 AM',value:'10:15',text:'10:15 AM'},{key:'10:30 AM',value:'10:30',text:'10:30 AM'},{key:'10:45 AM',value:'10:45',text:'10:45 AM'},{key:'11:00 AM',value:'11:00',text:'11:00 AM'},{key:'11:15 AM',value:'11:15',text:'11:15 AM'},{key:'11:30 AM',value:'11:30',text:'11:30 AM'},{key:'11:45 AM',value:'11:45',text:'11:45 AM'},{key:'12:00 PM',value:'12:00',text:'12:00 PM'},{key:'12:15 PM',value:'12:15',text:'12:15 PM'},{key:'12:30 PM',value:'12:30',text:'12:30 PM'},{key:'12:45 PM',value:'12:45',text:'12:45 PM'},{key:'1:00 PM',value:'1:00',text:'1:00 PM'},{key:'1:15 PM',value:'1:15',text:'1:15 PM'},{key:'1:30 PM',value:'1:30',text:'1:30 PM'},{key:'1:45 PM',value:'1:45',text:'1:45 PM'},{key:'2:00 PM',value:'2:00',text:'2:00 PM'},{key:'2:15 PM',value:'2:15',text:'2:15 PM'},{key:'2:30 PM',value:'2:30',text:'2:30 PM'},{key:'2:45 PM',value:'2:45',text:'2:45 PM'},{key:'3:00 PM',value:'3:00',text:'3:00 PM'},{key:'3:15 PM',value:'3:15',text:'3:15 PM'},{key:'3:30 PM',value:'3:30',text:'3:30 PM'},{key:'3:45 PM',value:'3:45',text:'3:45 PM'},{key:'4:00 PM',value:'4:00',text:'4:00 PM'},{key:'4:15 PM',value:'4:15',text:'4:15 PM'},{key:'4:30 PM',value:'4:30',text:'4:30 PM'},{key:'4:45 PM',value:'4:45',text:'4:45 PM'}];var currentOrder=this.state.shoppingCart===0?React.createElement(Header,{as:\"h3\"},\"Your order will show up here!\"):this.state.shoppingCart.map(function(item){return React.createElement(React.Fragment,{key:item.id},React.createElement(Grid.Row,null,React.createElement(Grid.Column,{width:\"6\"},React.createElement(Header,{as:\"h3\",color:\"grey\"},item.item.name)),React.createElement(Grid.Column,{width:\"4\"},React.createElement(Header,{as:\"h3\",color:\"grey\"},\"$\"+Number(item.sp[1]).toFixed(2))),React.createElement(Grid.Column,{width:\"6\"},React.createElement(Button,{circular:true,icon:\"close\",size:\"mini\",onClick:function onClick(){return _this2.handleRemoveItem(item.id);}}))),item.addons.map(function(addon){return React.createElement(Grid.Row,{key:addon.name},React.createElement(Grid.Column,{width:\"1\"}),React.createElement(Grid.Column,{width:\"5\"},React.createElement(\"span\",null,\"+ \"+addon.name)),React.createElement(Grid.Column,{width:\"4\"},React.createElement(Header,{as:\"h3\",color:\"grey\"},\"$\"+Number(addon.price).toFixed(2))),React.createElement(Grid.Column,{width:\"6\"}));}),React.createElement(Divider,null));});return React.createElement(React.Fragment,null,React.createElement(ClientHeader,{history:this.props.history,shoppingCart:this.state.shoppingCart}),React.createElement(Dimmer,{active:this.state.emptyPopUp,onClickOutside:this.handleCloseEmpty,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\",style:{fontFamily:'Avenir'}},\"Add something to your cart to fuel your grind.\")),React.createElement(Button,{onClick:this.handleCloseEmpty,style:{fontFamily:'Avenir'}},\"Close Window\")))),React.createElement(Dimmer,{active:this.state.timePopUp,onClickOutside:this.handleCloseTime,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\",style:{fontFamily:'Avenir'}},\"Please select an order time.\")),React.createElement(Button,{onClick:this.handleCloseTime,style:{fontFamily:'Avenir'}},\"Close Window\")))),React.createElement(Dimmer,{active:this.state.invalidTime,onClickOutside:this.handleCloseInvalidTime,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\",style:{fontFamily:'Avenir'}},\"The order time you've selected is invalid.\")),React.createElement(Button,{onClick:this.handleCloseInvalidTime,style:{fontFamily:'Avenir'}},\"Close Window\")))),React.createElement(Dimmer,{active:this.state.eligibilityPopUp,onClickOutside:this.handleCloseEligibility,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\",style:{fontFamily:'Avenir'}},\"Sorry, you're not eligible for the student charge option. Please select 'Pay at Store' to place your order.\")),React.createElement(Button,{onClick:this.handleCloseEligibility},\"Close Window\")))),React.createElement(Dimmer,{active:this.state.availabilityConfirm,onClickOutside:this.handleCloseAvailability,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\",style:{fontFamily:'Avenir'}},'Sorry, the '+this.state.outOfStock+' is out of stock. Please remove it from your cart to place your order.')),React.createElement(Button,{onClick:this.handleCloseAvailability},\"Close Window\")))),React.createElement(Dimmer,{active:this.state.storeStatusPopUp,onClickOutside:this.handleCloseStoreClosed,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\",style:{fontFamily:'Avenir'}},\"Ordering is disabled because the Coffee Club is currently closed. Feel free to browse our website.\")),React.createElement(Button,{onClick:this.handleCloseStoreClosed,style:{fontFamily:'Avenir'}},\"Close Window\")))),React.createElement(Dimmer,{active:this.state.confirm,onClickOutside:this.handleCloseConfirm,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\",style:{fontFamily:'Avenir'}},\"Are you sure you're all finished?\"),React.createElement(Header,{as:\"h4\",color:\"black\",style:{fontFamily:'Avenir'}},\"Clicking \\u201CAll Set!\\u201D below WILL charge your student account if you selected student charge. If you selected to \\u201CPay at Store\\u201D and do not pay before the end of the day, your student account will be charged.\")),React.createElement(Button.Group,null,React.createElement(Button,{onClick:this.handleCloseConfirm},\"Cancel\"),React.createElement(Button,{positive:true,onClick:this.handleConfirm,style:{backgroundColor:'#85A290'}},\"All Set!\"))))),React.createElement(Dimmer,{active:this.state.remove,onClickOutside:this.handleCloseConfirmRemove,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\",style:{fontFamily:'Avenir'}},\"Are you sure want to remove this from your cart?\")),React.createElement(Button.Group,null,React.createElement(Button,{onClick:this.handleCloseConfirmRemove},\"Cancel\"),React.createElement(Button,{negative:true,onClick:function onClick(){return _this2.handleConfirmRemove();}},\"Remove\"))))),React.createElement(Dimmer,{active:this.state.place,onClickOutside:this.handleCloseConfirmPlace,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\",style:{fontFamily:'Avenir'}},\"Your order has been placed! It should be ready in around 5-10 minutes. You'll receive an email with the details of your order. Make your way to the Coffee Club to pick up your order!\")),React.createElement(Button,{onClick:this.handleCloseConfirmPlace},\"Return to Menu\")))),React.createElement(Dimmer,{active:this.state.loading,page:true,inverted:true},React.createElement(Loader,{inverted:true},\"Loading\")),React.createElement(\"div\",{style:{height:'12vh'}}),React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true,style:{padding:'5%'}},React.createElement(Card.Content,null,React.createElement(Grid,{stackable:true},React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(Header,{as:\"h2\",style:{fontFamily:'Didot',fontStyle:'italic',color:'black'}},\"1. ORDER\"))),currentOrder),React.createElement(Grid,null,React.createElement(Grid.Row,null,React.createElement(Grid.Column,{width:\"3\"},React.createElement(Header,{as:\"h3\",style:{fontFamily:'Avenir',color:'black'}},\"Total\")),React.createElement(Grid.Column,{width:\"3\"}),React.createElement(Grid.Column,null,React.createElement(Header,{as:\"h3\",color:\"black\"},\"$\"+this.state.totalPrice.toFixed(2)))))),React.createElement(Card.Content,null,React.createElement(Grid,null,React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(Header,{as:\"h2\",style:{'fontFamily':'Didot','fontStyle':'italic','color':'black','paddingTop':'1em'}},\"2. PAYMENT\"))),React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(Form,null,React.createElement(Form.Field,null,React.createElement(Radio,{label:\"Student Charge\",name:\"payment\",checked:this.state.payment,onChange:function onChange(){return _this2.selectPayment(true);}})),React.createElement(Form.Field,null,React.createElement(Radio,{label:\"Pay at Store\",name:\"payment\",checked:!this.state.payment,onChange:function onChange(){return _this2.selectPayment(false);}}))))))),React.createElement(Card.Content,null,React.createElement(Grid,null,React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(Header,{as:\"h2\",style:{'fontFamily':'Didot','fontStyle':'italic','color':'black','paddingTop':'1em'}},\"3. TIME\"))),React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(Dropdown,{placeholder:\"Select Time\",fluid:true,selection:true,search:true,scrolling:true,options:options,value:this.state.time,onChange:this.handleChangeTime}))))),React.createElement(\"div\",null,React.createElement(Button,{floated:\"right\",style:{backgroundColor:'#EDAC86'},onClick:this.handlePlaceOrder},\"PLACE ORDER\")))));}}]);return OrderPage;}(React.Component);export default OrderPage;","map":{"version":3,"sources":["/Users/spoiledhua/Desktop/expresso/frontend/src/Components/OrderPage.js"],"names":["React","Card","Container","Header","Grid","Button","Radio","Form","Divider","Dimmer","Loader","Dropdown","ClientHeader","postMakeOrder","getUser","getStoreStatus","OrderPage","state","user","chargeEligible","availabilityConfirm","outOfStock","payment","totalPrice","shoppingCart","toBeRemoved","emptyPopUp","eligibilityPopUp","confirm","remove","place","storeStatus","storeStatusPopUp","timePopUp","time","loading","componentDidMount","setState","setTimeout","setInitial","JSON","parse","localStorage","getItem","getPrice","then","charge_eligible","data","status","price","i","length","Number","sp","j","addons","handleFilterItem","id","prevState","filter","item","handleRemoveItem","handleConfirmRemove","setItem","stringify","handleCloseConfirmRemove","emptyCart","selectPayment","handlePlaceOrder","handleCloseConfirm","orderTime","Date","orderTimeSplit","split","toString","setHours","currentTime","invalidTime","postOrder","items","addon","name","push","update","hours","timeValue","finalUpdate","netid","cost","availability","handleConfirm","handleConfirmPlace","handleCloseConfirmPlace","props","history","handleCloseEmpty","handleCloseEligibility","handleCloseAvailability","handleCloseStoreClosed","handleCloseTime","handleChangeTime","e","value","handleCloseInvalidTime","options","key","text","currentOrder","map","toFixed","width","fontFamily","backgroundColor","height","padding","fontStyle","color","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Card, Container, Header, Grid, Button, Radio, Form, Divider, Dimmer, Loader, Dropdown } from 'semantic-ui-react';\n\nimport ClientHeader from './ClientHeader';\n\nimport { postMakeOrder, getUser, getStoreStatus } from '../Axios/axios_getter';\n\nclass OrderPage extends React.Component {\n\n  state = {\n    user: null,\n    chargeEligible: null,\n    availabilityConfirm: false,\n    outOfStock: null,\n    payment: true,\n    totalPrice: 0,\n    shoppingCart: [],\n    toBeRemoved: null,\n    emptyPopUp: false,\n    eligibilityPopUp: false,\n    confirm: false,\n    remove: false,\n    place: false,\n    storeStatus: false,\n    storeStatusPopUp: false,\n    timePopUp: false,\n    time: null,\n    loading: false\n  }\n\n  componentDidMount = () => {\n    this.setState({ loading: true });\n    setTimeout(this.setInitial, 1000);\n  }\n\n  setInitial = async () => {\n    if (JSON.parse(localStorage.getItem('shoppingCart')) !== null) {\n      await this.setState({ shoppingCart: JSON.parse(localStorage.getItem('shoppingCart'))});\n    }\n    this.setState({ totalPrice: this.getPrice() });\n    await getUser(JSON.parse(localStorage.getItem('token')))\n      .then(user => {\n        this.setState({ user: user.user });\n        this.setState({ chargeEligible: user.charge_eligible });\n      });\n    await getStoreStatus(JSON.parse(localStorage.getItem('token')))\n      .then(data => {\n        this.setState({ storeStatus: data.status });\n      });\n    this.setState({ loading: false });\n  }\n\n  getPrice = () => {\n    let { shoppingCart } = this.state;\n    let price = 0;\n    for (let i = 0; i < shoppingCart.length; i++) {\n      price += Number(shoppingCart[i].sp[1]);\n      for (let j = 0; j < shoppingCart[i].addons.length; j++) {\n        price += Number(shoppingCart[i].addons[j].price);\n      }\n    }\n    return price;\n  }\n\n  handleFilterItem = async (id) => {\n    await this.setState({ loading: true });\n    await this.setState(prevState => {\n      let shoppingCart = prevState.shoppingCart;\n      shoppingCart = shoppingCart.filter(item => item.id !== id);\n      return { shoppingCart }\n    });\n    await this.setState({ loading: false });\n  }\n\n  handleRemoveItem = (id) => {\n    this.setState({ toBeRemoved: id });\n    this.setState({ remove: true });\n  }\n\n  handleConfirmRemove = async () => {\n    await this.handleFilterItem(this.state.toBeRemoved);\n    this.setState({ totalPrice: this.getPrice() });\n    localStorage.setItem('shoppingCart', JSON.stringify(this.state.shoppingCart));\n    this.handleCloseConfirmRemove();\n  }\n\n  emptyCart = async () => {\n    await this.setState({ shoppingCart: [] });\n    localStorage.setItem('shoppingCart', JSON.stringify(this.state.shoppingCart));\n  }\n\n  selectPayment = (payment) => {\n    this.setState({ payment: payment });\n  }\n\n  handlePlaceOrder = async () => {\n    this.setState({ loading: true });\n    await getStoreStatus(JSON.parse(localStorage.getItem('token')))\n      .then(data => {\n        this.setState({ storeStatus: data.status });\n    });\n    if (this.state.shoppingCart.length === 0) {\n      this.setState({ emptyPopUp: true });\n      this.handleCloseConfirm();\n    }\n    else if (this.state.time === null) {\n      this.setState({ timePopUp: true });\n      this.handleCloseConfirm();\n    }\n    else {\n      if (this.state.time !== 'Now') {\n        let orderTime = new Date();\n        const orderTimeSplit = this.state.time.split(':');\n        if (orderTimeSplit[0] < 5) {\n          orderTimeSplit[0] = Number(orderTimeSplit[0]) + 12;\n          orderTimeSplit[0] = orderTimeSplit[0].toString();\n        }\n        orderTime.setHours(orderTimeSplit[0], orderTimeSplit[1], 0);\n        const currentTime = new Date();\n        if (orderTime <= currentTime) {\n          this.setState({ invalidTime: true });\n          this.handleCloseConfirm();\n        }\n        else {\n          if (!this.state.chargeEligible && this.state.payment) {\n            this.setState({ eligibilityPopUp: true });\n            this.handleCloseConfirm();\n          }\n          else if (!this.state.storeStatus) {\n            this.setState({ storeStatusPopUp: true });\n            this.handleCloseConfirm();\n          }\n          else {\n            this.setState({ confirm: true });\n          }\n        }\n      }\n      else {\n        if (!this.state.chargeEligible && this.state.payment) {\n          this.setState({ eligibilityPopUp: true });\n          this.handleCloseConfirm();\n        }\n        else if (!this.state.storeStatus) {\n          this.setState({ storeStatusPopUp: true });\n          this.handleCloseConfirm();\n        }\n        else {\n          this.setState({ confirm: true });\n        }\n      }\n    }\n    this.setState({ loading: false });\n  }\n\n  postOrder = async (payment) => {\n\n    const { shoppingCart } = this.state;\n\n    await this.setState({ loading: true });\n\n    let items = [];\n    for (let i = 0; i < shoppingCart.length; i++) {\n      const item = shoppingCart[i];\n      let addons = []\n      for (let j = 0; j < item.addons.length; j++) {\n        const addon = { name: item.addons[j].name };\n        addons.push(addon);\n      }\n      const update = {\n        item: { name: item.item.name },\n        addons: addons,\n        sp: item.sp[0]\n      }\n      items.push(update);\n    }\n\n    let time = this.state.time;\n\n    if (time !== 'Now') {\n      time = time.split(':');\n      let hours = Number(time[0]);\n\n      let timeValue;\n\n      if (hours <= 5) {\n        timeValue = \"\" + (hours + 12);\n      }\n      else {\n        timeValue= \"\" + hours;\n      }\n      timeValue += ':' + time[1];\n      time = timeValue;\n    }\n\n    const finalUpdate = {\n      netid: this.state.user,\n      cost: this.getPrice(),\n      payment: payment,\n      status: payment,\n      items: items,\n      time: time\n    };\n    postMakeOrder(this.state.user, finalUpdate, JSON.parse(localStorage.getItem('token')))\n      .then(data => {\n        if (!data.availability) {\n          this.setState({ availabilityConfirm: true });\n          this.setState({ outOfStock: data.item });\n        }\n        else {\n          this.emptyCart();\n          this.setState({ totalPrice: this.getPrice() });\n          this.setState({ place: true });\n        }\n      });\n    this.setState({ loading: false });\n  }\n\n  handleConfirm = async () => {\n    this.setState({ loading: true });\n    await this.postOrder(this.state.payment);\n    await this.handleCloseConfirm();\n    this.setState({ loading: false });\n  }\n\n  handleConfirmPlace = () => {\n    this.setState({ place: true });\n  }\n\n  handleCloseConfirmPlace = () => {\n    this.setState({ place: false });\n    this.props.history.push('/menu');\n  }\n\n  handleCloseEmpty = () => {\n    this.setState({ emptyPopUp: false });\n  }\n\n  handleCloseEligibility = () => {\n    this.setState({ eligibilityPopUp: false });\n  }\n\n  handleCloseConfirm = () => {\n    this.setState({ confirm: false });\n  }\n\n  handleCloseAvailability = () => {\n    this.setState({ availabilityConfirm: false });\n    this.setState({ outOfStock: null });\n  }\n\n  handleCloseConfirmRemove = () => {\n    this.setState({ toBeRemoved: null });\n    this.setState({ remove: false });\n  }\n\n  handleCloseStoreClosed = () => {\n    this.setState({ storeStatusPopUp: false });\n  }\n\n  handleCloseTime = () => {\n    this.setState({ timePopUp: false });\n  }\n\n  handleChangeTime = (e, { value }) => {\n    this.setState({ time: value });\n  }\n\n  handleCloseInvalidTime = () => {\n    this.setState({ invalidTime: false });\n  }\n\n  render() {\n\n    const options = [\n      { key: 'Now', value: 'Now', text: 'Now'},\n      { key: '10:00 AM', value: '10:00', text: '10:00 AM'},\n      { key: '10:15 AM', value: '10:15', text: '10:15 AM'},\n      { key: '10:30 AM', value: '10:30', text: '10:30 AM'},\n      { key: '10:45 AM', value: '10:45', text: '10:45 AM'},\n      { key: '11:00 AM', value: '11:00', text: '11:00 AM'},\n      { key: '11:15 AM', value: '11:15', text: '11:15 AM'},\n      { key: '11:30 AM', value: '11:30', text: '11:30 AM'},\n      { key: '11:45 AM', value: '11:45', text: '11:45 AM'},\n      { key: '12:00 PM', value: '12:00', text: '12:00 PM'},\n      { key: '12:15 PM', value: '12:15', text: '12:15 PM'},\n      { key: '12:30 PM', value: '12:30', text: '12:30 PM'},\n      { key: '12:45 PM', value: '12:45', text: '12:45 PM'},\n      { key: '1:00 PM', value: '1:00', text: '1:00 PM'},\n      { key: '1:15 PM', value: '1:15', text: '1:15 PM'},\n      { key: '1:30 PM', value: '1:30', text: '1:30 PM'},\n      { key: '1:45 PM', value: '1:45', text: '1:45 PM'},\n      { key: '2:00 PM', value: '2:00', text: '2:00 PM'},\n      { key: '2:15 PM', value: '2:15', text: '2:15 PM'},\n      { key: '2:30 PM', value: '2:30', text: '2:30 PM'},\n      { key: '2:45 PM', value: '2:45', text: '2:45 PM'},\n      { key: '3:00 PM', value: '3:00', text: '3:00 PM'},\n      { key: '3:15 PM', value: '3:15', text: '3:15 PM'},\n      { key: '3:30 PM', value: '3:30', text: '3:30 PM'},\n      { key: '3:45 PM', value: '3:45', text: '3:45 PM'},\n      { key: '4:00 PM', value: '4:00', text: '4:00 PM'},\n      { key: '4:15 PM', value: '4:15', text: '4:15 PM'},\n      { key: '4:30 PM', value: '4:30', text: '4:30 PM'},\n      { key: '4:45 PM', value: '4:45', text: '4:45 PM'},\n    ]\n\n    let currentOrder = (this.state.shoppingCart === 0) ?\n    <Header as='h3'>\n      Your order will show up here!\n    </Header> :\n\n    this.state.shoppingCart.map(item => {\n      return (\n        <React.Fragment key={item.id}>\n          <Grid.Row>\n            <Grid.Column width='6'>\n              <Header as='h3' color='grey'>{item.item.name}</Header>\n            </Grid.Column>\n            <Grid.Column width='4'>\n              <Header as='h3' color='grey'>{\"$\" + Number(item.sp[1]).toFixed(2)}</Header>\n            </Grid.Column>\n            <Grid.Column width='6'>\n              <Button circular icon='close' size='mini' onClick={() => this.handleRemoveItem(item.id)}/>\n            </Grid.Column>\n          </Grid.Row>\n          {item.addons.map(addon => {\n            return (\n\n              <Grid.Row key={addon.name}>\n                <Grid.Column width='1' />\n                <Grid.Column width='5'>\n                  <span>{\"+ \" + addon.name}</span>\n                </Grid.Column>\n                <Grid.Column width='4'>\n                  <Header as='h3' color='grey'>{\"$\" + Number(addon.price).toFixed(2)}</Header>\n                </Grid.Column>\n                <Grid.Column width='6' />\n              </Grid.Row>\n            )\n          })}\n          <Divider />\n        </React.Fragment>\n      )\n    });\n\n    return (\n      <React.Fragment>\n        <ClientHeader history={this.props.history} shoppingCart={this.state.shoppingCart} />\n        {/* Pop up to confirm empty cart */}\n        <Dimmer active={this.state.emptyPopUp} onClickOutside={this.handleCloseEmpty} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey' style={{fontFamily:'Avenir'}}>Add something to your cart to fuel your grind.</Header>\n              </Card.Content>\n              <Button onClick={this.handleCloseEmpty} style={{fontFamily:'Avenir'}}>\n                Close Window\n              </Button>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm time selection */}\n        <Dimmer active={this.state.timePopUp} onClickOutside={this.handleCloseTime} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey' style={{fontFamily:'Avenir'}}>Please select an order time.</Header>\n              </Card.Content>\n              <Button onClick={this.handleCloseTime} style={{fontFamily:'Avenir'}}>\n                Close Window\n              </Button>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm invalid time selection */}\n        <Dimmer active={this.state.invalidTime} onClickOutside={this.handleCloseInvalidTime} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey' style={{fontFamily:'Avenir'}}>The order time you've selected is invalid.</Header>\n              </Card.Content>\n              <Button onClick={this.handleCloseInvalidTime} style={{fontFamily:'Avenir'}}>\n                Close Window\n              </Button>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm charge ineligibility*/}\n        <Dimmer active={this.state.eligibilityPopUp} onClickOutside={this.handleCloseEligibility} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey' style={{fontFamily:'Avenir'}}>Sorry, you're not eligible for the student charge option. Please select 'Pay at Store' to place your order.</Header>\n              </Card.Content>\n              <Button onClick={this.handleCloseEligibility}>\n                Close Window\n              </Button>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm out of stock */}\n        <Dimmer active={this.state.availabilityConfirm} onClickOutside={this.handleCloseAvailability} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey' style={{fontFamily:'Avenir'}}>{'Sorry, the ' + this.state.outOfStock + ' is out of stock. Please remove it from your cart to place your order.'}</Header>\n              </Card.Content>\n              <Button onClick={this.handleCloseAvailability}>\n                Close Window\n              </Button>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm store is not accepting orders */}\n        <Dimmer active={this.state.storeStatusPopUp} onClickOutside={this.handleCloseStoreClosed} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey' style={{fontFamily:'Avenir'}}>Ordering is disabled because the Coffee Club is currently closed. Feel free to browse our website.</Header>\n              </Card.Content>\n              <Button onClick={this.handleCloseStoreClosed} style={{fontFamily:'Avenir'}}>\n                Close Window\n              </Button>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm order */}\n        <Dimmer active={this.state.confirm} onClickOutside={this.handleCloseConfirm} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey' style={{fontFamily:'Avenir'}}>Are you sure you're all finished?</Header>\n                <Header as='h4' color='black' style={{fontFamily:'Avenir'}}>\n                  Clicking “All Set!” below WILL charge your student account if you selected student charge.\n                  If you selected to “Pay at Store” and do not pay before the end of the day, your student\n                  account will be charged.\n                </Header>\n              </Card.Content>\n              <Button.Group>\n                <Button onClick={this.handleCloseConfirm}>Cancel</Button>\n                <Button positive onClick={this.handleConfirm} style={{backgroundColor:'#85A290'}}>All Set!</Button>\n              </Button.Group>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm removal */}\n        <Dimmer active={this.state.remove} onClickOutside={this.handleCloseConfirmRemove} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey' style={{fontFamily:'Avenir'}}>Are you sure want to remove this from your cart?</Header>\n              </Card.Content>\n              <Button.Group>\n                <Button onClick={this.handleCloseConfirmRemove}>Cancel</Button>\n                <Button negative onClick={() => this.handleConfirmRemove()}>Remove</Button>\n              </Button.Group>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm order has been placed */}\n        <Dimmer active={this.state.place} onClickOutside={this.handleCloseConfirmPlace} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey' style={{fontFamily:'Avenir'}}>\n                  Your order has been placed! It should be ready in around 5-10 minutes.\n                  You'll receive an email with the details of your order. Make your way\n                  to the Coffee Club to pick up your order!\n                </Header>\n              </Card.Content>\n              <Button onClick={this.handleCloseConfirmPlace}>Return to Menu</Button>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Dimmer for loading */}\n        <Dimmer active={this.state.loading} page inverted>\n          <Loader inverted>Loading</Loader>\n        </Dimmer>\n\n        {/* Main component */}\n        <div style={{ height: '12vh' }} />\n        <Container style={{ width: '720px' }}>\n          <Card fluid style={{padding:'5%'}}>\n            <Card.Content>\n              <Grid stackable>\n                <Grid.Row>\n                  <Grid.Column>\n                    <Header as='h2' style={{fontFamily:'Didot', fontStyle:'italic', color:'black'}}>1. ORDER</Header>\n                  </Grid.Column>\n                </Grid.Row>\n                {currentOrder}\n              </Grid>\n              <Grid>\n                <Grid.Row>\n                  <Grid.Column width='3'>\n                    <Header as='h3' style={{fontFamily:'Avenir', color:'black'}}>Total</Header>\n                  </Grid.Column>\n                  <Grid.Column width='3' />\n                  <Grid.Column>\n                    <Header as='h3' color='black'>{\"$\" + this.state.totalPrice.toFixed(2)}</Header>\n                  </Grid.Column>\n                </Grid.Row>\n              </Grid>\n            </Card.Content>\n            <Card.Content>\n              <Grid>\n                <Grid.Row>\n                  <Grid.Column>\n                    <Header as='h2' style={{'fontFamily':'Didot', 'fontStyle':'italic', 'color':'black', 'paddingTop':'1em'}}>2. PAYMENT</Header>\n                  </Grid.Column>\n                </Grid.Row>\n                <Grid.Row>\n                  <Grid.Column>\n                    <Form>\n                      <Form.Field>\n                        <Radio\n                          label='Student Charge'\n                          name='payment'\n                          checked={this.state.payment}\n                          onChange={() => this.selectPayment(true)}\n                        />\n                      </Form.Field>\n                      <Form.Field>\n                        <Radio\n                          label='Pay at Store'\n                          name='payment'\n                          checked={!this.state.payment}\n                          onChange={() => this.selectPayment(false)}\n                        />\n                      </Form.Field>\n                    </Form>\n                  </Grid.Column>\n                </Grid.Row>\n              </Grid>\n            </Card.Content>\n            <Card.Content>\n              <Grid>\n                <Grid.Row>\n                  <Grid.Column>\n                    <Header as='h2' style={{'fontFamily':'Didot', 'fontStyle':'italic', 'color':'black', 'paddingTop':'1em'}}>3. TIME</Header>\n                  </Grid.Column>\n                </Grid.Row>\n                <Grid.Row>\n                  <Grid.Column>\n                    <Dropdown placeholder='Select Time' fluid selection search scrolling options={options} value={this.state.time} onChange={this.handleChangeTime}/>\n                  </Grid.Column>\n                </Grid.Row>\n              </Grid>\n            </Card.Content>\n            <div>\n              <Button floated='right' style={{backgroundColor:'#EDAC86'}} onClick={this.handlePlaceOrder}>\n                PLACE ORDER\n              </Button>\n            </div>\n          </Card>\n        </Container>\n      </React.Fragment>\n\n    );\n  }\n}\n\nexport default OrderPage;\n"]},"metadata":{},"sourceType":"module"}