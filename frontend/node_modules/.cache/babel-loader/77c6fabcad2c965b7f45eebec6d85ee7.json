{"ast":null,"code":"import _regeneratorRuntime from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Header,Grid,Divider,Dimmer,Loader}from'semantic-ui-react';import BaristaHeader from'./BaristaHeader';import{getDayHistory}from'../Axios/axios_getter';var BaristaHistory=/*#__PURE__*/function(_React$Component){_inherits(BaristaHistory,_React$Component);function BaristaHistory(){var _getPrototypeOf2;var _this;_classCallCheck(this,BaristaHistory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BaristaHistory)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={dayHistory:[],allHistory:[],showAll:false,loading:false,intervalId:null};_this.componentDidMount=function(){_this.setState({loading:true});setTimeout(_this.getDayHistory,1000);var intervalId=setInterval(_this.getDayHistory,10000);_this.setState({intervalId:intervalId});};_this.componentWillUnmount=function(){clearInterval(_this.state.intervalId);};_this.getDayHistory=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDayHistory(JSON.parse(localStorage.getItem('token'))).then(function(dayHistory){_this.setState({dayHistory:dayHistory});}).catch(function(error){console.log(error);_this.setState({dayHistory:[]});});case 2:_this.setState({loading:false});case 3:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(BaristaHistory,[{key:\"render\",value:function render(){var _this$state=this.state,dayHistory=_this$state.dayHistory,allHistory=_this$state.allHistory,showAll=_this$state.showAll;var historyType=showAll?allHistory:dayHistory;var history=historyType.length===0?React.createElement(Header,{as:\"h3\"},\"No Orders!\"):React.createElement(React.Fragment,null,historyType.map(function(history){var paymentType=history.payment?\"Student Charge\":\"In-Store\";return React.createElement(Grid.Row,{verticalAlign:\"middle\"},React.createElement(Grid.Column,{width:\"2\",verticalAlign:\"middle\",style:{textAlign:'center'}},React.createElement(\"p\",null,history.time)),React.createElement(Grid.Column,{width:\"8\",verticalAlign:\"middle\"},history.item.map(function(subitem){return React.createElement(React.Fragment,null,React.createElement(\"h2\",{style:{margin:'0'}},subitem),React.createElement(Divider,null));})),React.createElement(Grid.Column,{width:\"2\"},React.createElement(\"h3\",null,'$'+history.cost.toFixed(2))),React.createElement(Grid.Column,{width:\"2\"},React.createElement(\"h3\",null,history.netid)),React.createElement(Grid.Column,{width:\"2\"},React.createElement(\"p\",null,paymentType)));}));return React.createElement(React.Fragment,null,React.createElement(BaristaHeader,{history:this.props.history}),React.createElement(\"div\",{style:{height:'12vh'}}),React.createElement(Dimmer,{active:this.state.loading,inverted:true,page:true},React.createElement(Loader,{inverted:true},\"Loading\")),React.createElement(Grid,{stackable:true,divided:\"vertically\",textAlign:\"center\"},React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(\"h2\",null,\"Order History\"))),history));}}]);return BaristaHistory;}(React.Component);export default BaristaHistory;","map":{"version":3,"sources":["/Users/spoiledhua/Desktop/expresso/frontend/src/Components/BaristaHistory.js"],"names":["React","Header","Grid","Divider","Dimmer","Loader","BaristaHeader","getDayHistory","BaristaHistory","state","dayHistory","allHistory","showAll","loading","intervalId","componentDidMount","setState","setTimeout","setInterval","componentWillUnmount","clearInterval","JSON","parse","localStorage","getItem","then","catch","error","console","log","historyType","history","length","map","paymentType","payment","textAlign","time","item","subitem","margin","cost","toFixed","netid","props","height","Component"],"mappings":"ynCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,OAAvB,CAAgCC,MAAhC,CAAwCC,MAAxC,KAAsD,mBAAtD,CAEA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,OAASC,aAAT,KAA8B,uBAA9B,C,GAEMC,CAAAA,c,2aAEJC,K,CAAQ,CACNC,UAAU,CAAE,EADN,CAENC,UAAU,CAAE,EAFN,CAGNC,OAAO,CAAE,KAHH,CAINC,OAAO,CAAE,KAJH,CAKNC,UAAU,CAAE,IALN,C,OAQRC,iB,CAAoB,UAAM,CACxB,MAAKC,QAAL,CAAc,CAAEH,OAAO,CAAE,IAAX,CAAd,EACAI,UAAU,CAAC,MAAKV,aAAN,CAAqB,IAArB,CAAV,CACA,GAAIO,CAAAA,UAAU,CAAGI,WAAW,CAAC,MAAKX,aAAN,CAAqB,KAArB,CAA5B,CACA,MAAKS,QAAL,CAAc,CAAEF,UAAU,CAAEA,UAAd,CAAd,EACD,C,OAEDK,oB,CAAuB,UAAM,CAC3BC,aAAa,CAAC,MAAKX,KAAL,CAAWK,UAAZ,CAAb,CACD,C,OAEDP,a,sEAAgB,yJACRA,CAAAA,aAAa,CAACc,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAD,CAAb,CACHC,IADG,CACE,SAAAf,UAAU,CAAI,CAClB,MAAKM,QAAL,CAAc,CAAEN,UAAU,CAAEA,UAAd,CAAd,EACD,CAHG,EAIHgB,KAJG,CAIG,SAAAC,KAAK,CAAI,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACA,MAAKX,QAAL,CAAc,CAAEN,UAAU,CAAE,EAAd,CAAd,EACD,CAPG,CADQ,QASd,MAAKM,QAAL,CAAc,CAAEH,OAAO,CAAE,KAAX,CAAd,EATc,sD,mFAYL,iBAEqC,KAAKJ,KAF1C,CAECC,UAFD,aAECA,UAFD,CAEaC,UAFb,aAEaA,UAFb,CAEyBC,OAFzB,aAEyBA,OAFzB,CAIP,GAAIkB,CAAAA,WAAW,CAAIlB,OAAD,CAAYD,UAAZ,CAAyBD,UAA3C,CAEA,GAAIqB,CAAAA,OAAO,CAAID,WAAW,CAACE,MAAZ,GAAuB,CAAxB,CACd,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,eADc,CAKd,oBAAC,KAAD,CAAO,QAAP,MACGF,WAAW,CAACG,GAAZ,CAAgB,SAAAF,OAAO,CAAI,CAC1B,GAAIG,CAAAA,WAAW,CAAIH,OAAO,CAACI,OAAT,CAAoB,gBAApB,CAAuC,UAAzD,CACA,MACE,qBAAC,IAAD,CAAM,GAAN,EAAU,aAAa,CAAC,QAAxB,EACE,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAC,GAAnB,CAAuB,aAAa,CAAC,QAArC,CAA8C,KAAK,CAAE,CAACC,SAAS,CAAC,QAAX,CAArD,EACE,6BAAIL,OAAO,CAACM,IAAZ,CADF,CADF,CAIE,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAC,GAAnB,CAAuB,aAAa,CAAC,QAArC,EACGN,OAAO,CAACO,IAAR,CAAaL,GAAb,CAAiB,SAAAM,OAAO,CAAI,CAC3B,MACE,qBAAC,KAAD,CAAO,QAAP,MACE,0BAAI,KAAK,CAAE,CAACC,MAAM,CAAE,GAAT,CAAX,EAA2BD,OAA3B,CADF,CAEE,oBAAC,OAAD,MAFF,CADF,CAMD,CAPA,CADH,CAJF,CAcE,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAC,GAAnB,EACE,8BAAK,IAAMR,OAAO,CAACU,IAAR,CAAaC,OAAb,CAAqB,CAArB,CAAX,CADF,CAdF,CAiBE,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAC,GAAnB,EACE,8BAAKX,OAAO,CAACY,KAAb,CADF,CAjBF,CAoBE,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAC,GAAnB,EACE,6BAAIT,WAAJ,CADF,CApBF,CADF,CA0BD,CA5BA,CADH,CALA,CAsCE,MACI,qBAAC,KAAD,CAAO,QAAP,MACE,oBAAC,aAAD,EAAe,OAAO,CAAE,KAAKU,KAAL,CAAWb,OAAnC,EADF,CAEE,2BAAK,KAAK,CAAE,CAAEc,MAAM,CAAE,MAAV,CAAZ,EAFF,CAGE,oBAAC,MAAD,EAAQ,MAAM,CAAE,KAAKpC,KAAL,CAAWI,OAA3B,CAAoC,QAAQ,KAA5C,CAA6C,IAAI,KAAjD,EACE,oBAAC,MAAD,EAAQ,QAAQ,KAAhB,YADF,CAHF,CAME,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAC,YAAxB,CAAqC,SAAS,CAAC,QAA/C,EACE,oBAAC,IAAD,CAAM,GAAN,MACE,oBAAC,IAAD,CAAM,MAAN,MACE,8CADF,CADF,CADF,CAMGkB,OANH,CANF,CADJ,CAiBH,C,4BA9FwB/B,KAAK,CAAC8C,S,EAiGnC,cAAetC,CAAAA,cAAf","sourcesContent":["import React from 'react';\nimport { Header, Grid, Divider, Dimmer, Loader } from 'semantic-ui-react';\n\nimport BaristaHeader from './BaristaHeader';\nimport { getDayHistory } from '../Axios/axios_getter';\n\nclass BaristaHistory extends React.Component {\n\n  state = {\n    dayHistory: [],\n    allHistory: [],\n    showAll: false,\n    loading: false,\n    intervalId: null\n  }\n\n  componentDidMount = () => {\n    this.setState({ loading: true });\n    setTimeout(this.getDayHistory, 1000);\n    let intervalId = setInterval(this.getDayHistory, 10000);\n    this.setState({ intervalId: intervalId });\n  }\n\n  componentWillUnmount = () => {\n    clearInterval(this.state.intervalId);\n  }\n\n  getDayHistory = async () => {\n    await getDayHistory(JSON.parse(localStorage.getItem('token')))\n      .then(dayHistory => {\n        this.setState({ dayHistory: dayHistory });\n      })\n      .catch(error => {\n        console.log(error);\n        this.setState({ dayHistory: [] });\n      });\n    this.setState({ loading: false });\n  }\n\n    render() {\n\n      const { dayHistory, allHistory, showAll } = this.state;\n\n      let historyType = (showAll) ? allHistory : dayHistory;\n\n      let history = (historyType.length === 0) ?\n      <Header as='h3'>\n        No Orders!\n      </Header> :\n\n      <React.Fragment>\n        {historyType.map(history => {\n          let paymentType = (history.payment) ? \"Student Charge\" : \"In-Store\";\n          return (\n            <Grid.Row verticalAlign='middle'>\n              <Grid.Column width='2' verticalAlign='middle' style={{textAlign:'center'}}>\n                <p>{history.time}</p>\n              </Grid.Column>\n              <Grid.Column width='8' verticalAlign='middle'>\n                {history.item.map(subitem => {\n                  return (\n                    <React.Fragment>\n                      <h2 style={{margin: '0'}}>{subitem}</h2>\n                      <Divider />\n                    </React.Fragment>\n                  )\n                })}\n              </Grid.Column>\n              <Grid.Column width='2'>\n                <h3>{'$' + history.cost.toFixed(2)}</h3>\n              </Grid.Column>\n              <Grid.Column width='2'>\n                <h3>{history.netid}</h3>\n              </Grid.Column>\n              <Grid.Column width='2'>\n                <p>{paymentType}</p>\n              </Grid.Column>\n            </Grid.Row>\n          )\n        })}\n      </React.Fragment>\n\n\n        return (\n            <React.Fragment>\n              <BaristaHeader history={this.props.history} />\n              <div style={{ height: '12vh' }} />\n              <Dimmer active={this.state.loading} inverted page>\n                <Loader inverted>Loading</Loader>\n              </Dimmer>\n              <Grid stackable divided='vertically' textAlign='center'>\n                <Grid.Row>\n                  <Grid.Column>\n                    <h2>Order History</h2>\n                  </Grid.Column>\n                </Grid.Row>\n                {history}\n              </Grid>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default BaristaHistory\n"]},"metadata":{},"sourceType":"module"}