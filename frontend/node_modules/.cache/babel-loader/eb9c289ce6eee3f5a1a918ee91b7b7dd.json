{"ast":null,"code":"import _regeneratorRuntime from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Card,Icon,Image,Container,Header,Grid,Button,Radio,Form,Divider,Dimmer,Loader,Segment}from'semantic-ui-react';var OrderPage=/*#__PURE__*/function(_React$Component){_inherits(OrderPage,_React$Component);function OrderPage(props){var _this;_classCallCheck(this,OrderPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(OrderPage).call(this,props));_this.getPrice=function(){var shoppingCart=_this.props.shoppingCart;var price=0;for(var i=0;i<shoppingCart.length;i++){price+=Number(shoppingCart[i].sp[1]);for(var j=0;j<shoppingCart[i].addons.length;j++){price+=Number(shoppingCart[i].addons[j].price);}}return price;};_this.handleRemoveItem=function(id){_this.setState({toBeRemoved:id});_this.setState({remove:true});};_this.handleConfirmRemove=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.handleRemoveItem(_this.state.toBeRemoved);case 2:_this.setState({totalPrice:_this.getPrice()});_this.handleCloseConfirmRemove();case 4:case\"end\":return _context.stop();}}},_callee);}));_this.selectPayment=function(payment){_this.setState({payment:payment});};_this.handlePlaceOrder=function(){_this.setState({confirm:true});};_this.handleConfirm=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var shoppingCart;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:shoppingCart=_this.props.shoppingCart;_this.setState({loading:true});if(!(_this.props.shoppingCart.length==0)){_context2.next=6;break;}_this.setState({emptyPopUp:true});_context2.next=8;break;case 6:_context2.next=8;return _this.props.postOrder(_this.state.payment);case 8:_context2.next=10;return _this.handleCloseConfirm();case 10:_context2.next=12;return _this.props.emptyCart();case 12:_context2.next=14;return _this.setState({totalPrice:0});case 14:_context2.next=16;return _this.setState({loading:false});case 16:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleCloseEmpty=function(){_this.setState({emptyPopUp:false});};_this.handleCloseConfirm=function(){_this.setState({confirm:false});};_this.handleCloseConfirmRemove=function(){_this.setState({toBeRemoved:null});_this.setState({remove:false});};var _shoppingCart=_this.props.shoppingCart;var _price=0;for(var i=0;i<_shoppingCart.length;i++){_price+=Number(_shoppingCart[i].sp[1]);for(var j=0;j<_shoppingCart[i].addons.length;j++){_price+=Number(_shoppingCart[i].addons[j].price);}}_this.state={payment:true,totalPrice:_price,toBeRemoved:null,emptyPopUp:false,confirm:false,remove:false,loading:false};return _this;}_createClass(OrderPage,[{key:\"render\",value:function render(){var _this2=this;var currentOrder=this.props.shoppingCart==0?React.createElement(Header,{as:\"h3\"},\"Your order will show up here!\"):this.props.shoppingCart.map(function(item){return React.createElement(React.Fragment,null,React.createElement(Grid.Row,null,React.createElement(Grid.Column,{width:\"6\"},React.createElement(Header,{as:\"h3\",color:\"grey\"},item.item.name)),React.createElement(Grid.Column,{width:\"4\"},React.createElement(Header,{as:\"h3\",color:\"grey\"},\"$\"+Number(item.sp[1]).toFixed(2))),React.createElement(Grid.Column,{width:\"6\"},React.createElement(Button,{circular:true,icon:\"close\",size:\"mini\",onClick:function onClick(){return _this2.handleRemoveItem(item.id);}}))),item.addons.map(function(addon){return React.createElement(Grid.Row,null,React.createElement(Grid.Column,{width:\"1\"}),React.createElement(Grid.Column,{width:\"5\"},React.createElement(\"span\",null,\"+ \"+addon.name)),React.createElement(Grid.Column,{width:\"4\"},React.createElement(Header,{as:\"h3\",color:\"grey\"},\"$\"+Number(addon.price).toFixed(2))),React.createElement(Grid.Column,{width:\"6\"}));}),React.createElement(Divider,null));});return React.createElement(React.Fragment,null,React.createElement(Dimmer,{active:this.state.emptyPopUp,onClickOutside:this.handleCloseEmpty,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\"},\"Add something to your cart to fuel your grind.\")),React.createElement(Button,{onClick:this.handleCloseEmpty},\"Close Window\")))),React.createElement(Dimmer,{active:this.state.confirm,onClickOutside:this.handleCloseConfirm,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\"},\"Are you sure you're all finished?\"),React.createElement(Header,{as:\"h4\",color:\"black\"},\"Hi from the Expresso team! We would like to notify you that clicking \\u201CAll Set\\u201D below WILL charge your student account if you selected student charge. If you selected to \\u201Cpay in store\\u201D and do not pay before the end of the day, your student account will be charged, whether you picked up your food/beverage or not. Thank you for ordering with Expresso! We hope to see you again!\")),React.createElement(Button.Group,null,React.createElement(Button,{onClick:this.handleCloseConfirm},\"Cancel\"),React.createElement(Button,{positive:true,onClick:this.handleConfirm},\"All Set!\"))))),React.createElement(Dimmer,{active:this.state.remove,onClickOutside:this.handleCloseConfirmRemove,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\"},\"Are you sure want to remove this from your cart?\")),React.createElement(Button.Group,null,React.createElement(Button,{onClick:this.handleCloseConfirmRemove},\"Cancel\"),React.createElement(Button,{negative:true,onClick:function onClick(){return _this2.handleConfirmRemove();}},\"Remove\"))))),React.createElement(Dimmer,{active:this.state.loading,page:true,inverted:true},React.createElement(Loader,{inverted:true},\"Loading\")),React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Grid,{stackable:true},React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(Header,{as:\"h2\",color:\"black\"},\"1. ORDER\"))),currentOrder),React.createElement(Grid,null,React.createElement(Grid.Row,null,React.createElement(Grid.Column,{width:\"3\"},React.createElement(Header,{as:\"h3\",color:\"black\"},\"Total\")),React.createElement(Grid.Column,{width:\"3\"}),React.createElement(Grid.Column,null,React.createElement(Header,{as:\"h3\",color:\"black\"},\"$\"+this.state.totalPrice.toFixed(2)))))),React.createElement(Card.Content,null,React.createElement(Grid,null,React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(Header,{as:\"h2\",color:\"black\"},\"2. PAYMENT\"))),React.createElement(Grid.Row,null,React.createElement(Grid.Column,null,React.createElement(Form,null,React.createElement(Form.Field,null,React.createElement(Radio,{label:\"Student Charge\",name:\"payment\",checked:this.state.payment,onChange:function onChange(){return _this2.selectPayment(true);}})),React.createElement(Form.Field,null,React.createElement(Radio,{label:\"Pay at Store\",name:\"payment\",checked:!this.state.payment,onChange:function onChange(){return _this2.selectPayment(false);}}))))))),React.createElement(\"div\",null,React.createElement(Button,{floated:\"right\",onClick:this.handlePlaceOrder},\"PLACE ORDER\")))));}}]);return OrderPage;}(React.Component);export default OrderPage;","map":{"version":3,"sources":["/Users/spoiledhua/Desktop/expresso/frontend/src/Components/OrderPage.js"],"names":["React","Card","Icon","Image","Container","Header","Grid","Button","Radio","Form","Divider","Dimmer","Loader","Segment","OrderPage","props","getPrice","shoppingCart","price","i","length","Number","sp","j","addons","handleRemoveItem","id","setState","toBeRemoved","remove","handleConfirmRemove","state","totalPrice","handleCloseConfirmRemove","selectPayment","payment","handlePlaceOrder","confirm","handleConfirm","loading","emptyPopUp","postOrder","handleCloseConfirm","emptyCart","handleCloseEmpty","currentOrder","map","item","name","toFixed","addon","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Card, Icon, Image, Container, Header, Grid, Button, Radio, Form, Divider, Dimmer, Loader, Segment } from 'semantic-ui-react';\n\nclass OrderPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    let { shoppingCart } = this.props;\n    let price = 0;\n    for (let i = 0; i < shoppingCart.length; i++) {\n      price += Number(shoppingCart[i].sp[1]);\n      for (let j = 0; j < shoppingCart[i].addons.length; j++) {\n        price += Number(shoppingCart[i].addons[j].price);\n      }\n    }\n\n    this.state = {\n      payment: true,\n      totalPrice: price,\n      toBeRemoved: null,\n      emptyPopUp: false,\n      confirm: false,\n      remove: false,\n      loading: false\n    }\n  }\n\n  getPrice = () => {\n    let { shoppingCart } = this.props;\n    let price = 0;\n    for (let i = 0; i < shoppingCart.length; i++) {\n      price += Number(shoppingCart[i].sp[1]);\n      for (let j = 0; j < shoppingCart[i].addons.length; j++) {\n        price += Number(shoppingCart[i].addons[j].price);\n      }\n    }\n    return price;\n  }\n\n  handleRemoveItem = (id) => {\n    this.setState({ toBeRemoved: id });\n    this.setState({ remove: true });\n  }\n\n  handleConfirmRemove = async () => {\n    await this.props.handleRemoveItem(this.state.toBeRemoved);\n    this.setState({ totalPrice: this.getPrice() });\n    this.handleCloseConfirmRemove();\n  }\n\n  selectPayment = (payment) => {\n    this.setState({ payment: payment });\n  }\n\n  handlePlaceOrder = () => {\n    this.setState({ confirm: true });\n  }\n\n  handleConfirm = async () => {\n    let { shoppingCart } = this.props;\n    this.setState({ loading: true });\n    if (this.props.shoppingCart.length == 0)\n      this.setState({ emptyPopUp: true });\n    else {\n      await this.props.postOrder(this.state.payment);\n    }\n    await this.handleCloseConfirm();\n    await this.props.emptyCart();\n    await this.setState({ totalPrice: 0 })\n    await this.setState({ loading: false });\n  }\n\n  handleCloseEmpty = () => {\n    this.setState({ emptyPopUp: false });\n  }\n\n  handleCloseConfirm = () => {\n    this.setState({ confirm: false });\n  }\n\n  handleCloseConfirmRemove = () => {\n    this.setState({ toBeRemoved: null });\n    this.setState({ remove: false });\n  }\n\n  render() {\n\n    let currentOrder = (this.props.shoppingCart == 0) ?\n    <Header as='h3'>\n      Your order will show up here!\n    </Header> :\n\n    this.props.shoppingCart.map(item => {\n      return (\n        <React.Fragment>\n          <Grid.Row>\n            <Grid.Column width='6'>\n              <Header as='h3' color='grey'>{item.item.name}</Header>\n            </Grid.Column>\n            <Grid.Column width='4'>\n              <Header as='h3' color='grey'>{\"$\" + Number(item.sp[1]).toFixed(2)}</Header>\n            </Grid.Column>\n            <Grid.Column width='6'>\n              <Button circular icon='close' size='mini' onClick={() => this.handleRemoveItem(item.id)}/>\n            </Grid.Column>\n          </Grid.Row>\n          {item.addons.map(addon => {\n            return (\n\n              <Grid.Row>\n                <Grid.Column width='1' />\n                <Grid.Column width='5'>\n                  <span>{\"+ \" + addon.name}</span>\n                </Grid.Column>\n                <Grid.Column width='4'>\n                  <Header as='h3' color='grey'>{\"$\" + Number(addon.price).toFixed(2)}</Header>\n                </Grid.Column>\n                <Grid.Column width='6' />\n              </Grid.Row>\n            )\n          })}\n          <Divider />\n        </React.Fragment>\n      )\n    });\n\n    return (\n      <React.Fragment>\n        {/* Pop up to confirm empty cart */}\n        <Dimmer active={this.state.emptyPopUp} onClickOutside={this.handleCloseEmpty} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey'>Add something to your cart to fuel your grind.</Header>\n              </Card.Content>\n              <Button onClick={this.handleCloseEmpty}>\n                Close Window\n              </Button>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm order */}\n        <Dimmer active={this.state.confirm} onClickOutside={this.handleCloseConfirm} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey'>Are you sure you're all finished?</Header>\n                <Header as='h4' color='black'>\n                  Hi from the Expresso team! We would like to notify you that clicking “All Set” below WILL charge\n                  your student account if you selected student charge. If you selected to “pay in store” and do not\n                  pay before the end of the day, your student account will be charged, whether you picked up your\n                  food/beverage or not. Thank you for ordering with Expresso! We hope to see you again!\n                </Header>\n              </Card.Content>\n              <Button.Group>\n                <Button onClick={this.handleCloseConfirm}>Cancel</Button>\n                <Button positive onClick={this.handleConfirm}>All Set!</Button>\n              </Button.Group>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Pop up to confirm removal */}\n        <Dimmer active={this.state.remove} onClickOutside={this.handleCloseConfirmRemove} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey'>Are you sure want to remove this from your cart?</Header>\n              </Card.Content>\n              <Button.Group>\n                <Button onClick={this.handleCloseConfirmRemove}>Cancel</Button>\n                <Button negative onClick={() => this.handleConfirmRemove()}>Remove</Button>\n              </Button.Group>\n            </Card>\n          </Container>\n        </Dimmer>\n        {/* Dimmer for loading */}\n        <Dimmer active={this.state.loading} page inverted>\n          <Loader inverted>Loading</Loader>\n        </Dimmer>\n\n        {/* Main component */}\n        <Container style={{ width: '720px' }}>\n          <Card fluid>\n            <Card.Content>\n              <Grid stackable>\n                <Grid.Row>\n                  <Grid.Column>\n                    <Header as='h2' color='black'>1. ORDER</Header>\n                  </Grid.Column>\n                </Grid.Row>\n                {currentOrder}\n              </Grid>\n              <Grid>\n                <Grid.Row>\n                  <Grid.Column width='3'>\n                    <Header as='h3' color='black'>Total</Header>\n                  </Grid.Column>\n                  <Grid.Column width='3' />\n                  <Grid.Column>\n                    <Header as='h3' color='black'>{\"$\" + this.state.totalPrice.toFixed(2)}</Header>\n                  </Grid.Column>\n                </Grid.Row>\n              </Grid>\n            </Card.Content>\n            <Card.Content>\n              <Grid>\n                <Grid.Row>\n                  <Grid.Column>\n                    <Header as='h2' color='black'>2. PAYMENT</Header>\n                  </Grid.Column>\n                </Grid.Row>\n                <Grid.Row>\n                  <Grid.Column>\n                    <Form>\n                      <Form.Field>\n                        <Radio\n                          label='Student Charge'\n                          name='payment'\n                          checked={this.state.payment}\n                          onChange={() => this.selectPayment(true)}\n                        />\n                      </Form.Field>\n                      <Form.Field>\n                        <Radio\n                          label='Pay at Store'\n                          name='payment'\n                          checked={!this.state.payment}\n                          onChange={() => this.selectPayment(false)}\n                        />\n                      </Form.Field>\n                    </Form>\n                  </Grid.Column>\n                </Grid.Row>\n              </Grid>\n            </Card.Content>\n            <div>\n              <Button floated='right' onClick={this.handlePlaceOrder}>\n                PLACE ORDER\n              </Button>\n            </div>\n          </Card>\n        </Container>\n      </React.Fragment>\n\n    );\n  }\n}\n\nexport default OrderPage;\n"]},"metadata":{},"sourceType":"module"}