{"ast":null,"code":"import _regeneratorRuntime from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Header,Grid,Button,Divider,Dimmer,Loader}from'semantic-ui-react';import BaristaHeader from'./BaristaHeader';import*as dingURL from'../Assets/ding.mp3';import{getBaristaOrders,postInProgress,postComplete,postPaid}from'../Axios/axios_getter';var ding=new Audio(dingURL);var BaristaOrders=/*#__PURE__*/function(_React$Component){_inherits(BaristaOrders,_React$Component);function BaristaOrders(){var _getPrototypeOf2;var _this;_classCallCheck(this,BaristaOrders);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BaristaOrders)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={allOrders:[],loading:false};_this.componentDidMount=function(){_this.setState({loading:true});_this.getPendingOrders(true);setTimeout(_this.getPendingOrders,1000);setInterval(_this.getPendingOrders,10000);};_this.getPendingOrders=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(isFirstLoad){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getBaristaOrders().then(function(allOrders){// Check if there are any new orders\nvar hasNewOrders=false;if(!isFirstLoad){var oldOrders=new Set(_this.state.allOrders.map(function(order){return order.orderid;}));for(var i=0;i<allOrders.length;i++){if(!oldOrders.has(allOrders[i].orderid)){hasNewOrders=true;break;}}}// If there's a new order, play a ding\nif(hasNewOrders){ding.play();}_this.setState({allOrders:allOrders});}).catch(function(error){console.log(error);});case 2:_this.setState({loading:false});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleInProgress=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({loading:true});_context2.next=3;return postInProgress(id);case 3:_this.getPendingOrders();_this.setState({loading:false});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleComplete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.setState({loading:true});_context3.next=3;return postComplete(id);case 3:_this.getPendingOrders();_this.setState({loading:false});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.handlePaid=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.setState({loading:true});_context4.next=3;return postPaid(id);case 3:_this.getPendingOrders();_this.setState({loading:false});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();return _this;}_createClass(BaristaOrders,[{key:\"render\",value:function render(){var _this2=this;var allOrders=this.state.allOrders;var pendingOrders=allOrders.length===0?React.createElement(Header,{as:\"h3\"},\"No Orders!\"):this.state.allOrders.map(function(order){return React.createElement(React.Fragment,null,React.createElement(Grid.Row,null,React.createElement(Grid.Column,{verticalAlign:\"middle\",width:\"2\",style:{textAlign:'center'}},React.createElement(\"h1\",null,order.orderid)),React.createElement(Grid.Column,{width:\"6\"},order.item.map(function(subitem){return React.createElement(React.Fragment,null,React.createElement(\"h2\",{style:{margin:'0'}},subitem),React.createElement(Divider,null));}),React.createElement(\"h3\",{style:{margin:'0'}},order.netid),React.createElement(\"p\",null,order.time)),React.createElement(Grid.Column,{width:\"3\",verticalAlign:\"middle\"},React.createElement(Button,{circular:true,disabled:order.order_status,onClick:function onClick(){return _this2.handleInProgress(order.orderid);},style:{fontFamily:'Avenir',background:'#EBD36D'}},\"IN PROGRESS\")),React.createElement(Grid.Column,{width:\"3\",verticalAlign:\"middle\"},React.createElement(Button,{circular:true,disabled:!order.status,onClick:function onClick(){return _this2.handleComplete(order.orderid);},style:{fontFamily:'Avenir',background:'#85A290'}},\"COMPLETE\")),React.createElement(Grid.Column,{width:\"2\",verticalAlign:\"middle\"},order.status?React.createElement(Header,{as:\"h3\"},\"PAID\"):React.createElement(Button,{circular:true,onClick:function onClick(){return _this2.handlePaid(order.orderid);},style:{color:'white',fontFamily:'Avenir',background:'#C96148'}},\"PENDING\"))));});return React.createElement(React.Fragment,null,React.createElement(BaristaHeader,{history:this.props.history}),React.createElement(Dimmer,{active:this.state.loading,inverted:true,page:true},React.createElement(Loader,{inverted:true},\"Loading\")),React.createElement(Grid,{stackable:true,divided:\"vertically\"},pendingOrders));}}]);return BaristaOrders;}(React.Component);export default BaristaOrders;","map":{"version":3,"sources":["/Users/spoiledhua/Desktop/expresso/frontend/src/Components/BaristaOrders.js"],"names":["React","Header","Grid","Button","Divider","Dimmer","Loader","BaristaHeader","dingURL","getBaristaOrders","postInProgress","postComplete","postPaid","ding","Audio","BaristaOrders","state","allOrders","loading","componentDidMount","setState","getPendingOrders","setTimeout","setInterval","isFirstLoad","then","hasNewOrders","oldOrders","Set","map","order","orderid","i","length","has","play","catch","error","console","log","handleInProgress","id","handleComplete","handlePaid","pendingOrders","textAlign","item","subitem","margin","netid","time","order_status","fontFamily","background","status","color","props","history","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Header, Grid, Button, Divider, Dimmer, Loader} from 'semantic-ui-react';\n\nimport BaristaHeader from './BaristaHeader';\nimport * as dingURL from '../Assets/ding.mp3';\n\nimport { getBaristaOrders, postInProgress, postComplete, postPaid } from '../Axios/axios_getter';\n\nconst ding = new Audio(dingURL);\n\nclass BaristaOrders extends React.Component {\n\n  state = {\n    allOrders: [],\n    loading: false\n  }\n\n  componentDidMount = () => {\n    this.setState({ loading: true });\n    this.getPendingOrders(true);\n    setTimeout(this.getPendingOrders, 1000);\n    setInterval(this.getPendingOrders, 10000);\n  }\n\n  getPendingOrders = async (isFirstLoad) => {\n    await getBaristaOrders()\n      .then(allOrders => {\n        // Check if there are any new orders\n        let hasNewOrders = false;\n        if (!isFirstLoad) {\n          const oldOrders = new Set(this.state.allOrders.map(order => order.orderid));\n          for (let i = 0; i < allOrders.length; i++) {\n            if (!oldOrders.has(allOrders[i].orderid)) {\n              hasNewOrders = true;\n              break;\n            }\n          }\n        }\n\n        // If there's a new order, play a ding\n        if (hasNewOrders) {\n          ding.play();\n        }\n        this.setState({ allOrders: allOrders });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n    this.setState({ loading: false });\n  }\n\n  handleInProgress = async (id) => {\n    this.setState({ loading: true });\n    await postInProgress(id);\n    this.getPendingOrders();\n    this.setState({ loading: false });\n  }\n\n  handleComplete = async (id) => {\n    this.setState({ loading: true });\n    await postComplete(id);\n    this.getPendingOrders();\n    this.setState({ loading: false });\n  }\n\n  handlePaid = async (id) => {\n    this.setState({ loading: true });\n    await postPaid(id);\n    this.getPendingOrders();\n    this.setState({ loading: false });\n  }\n\n  render() {\n\n    const { allOrders } = this.state;\n\n    let pendingOrders = (allOrders.length === 0) ?\n    <Header as='h3'>\n      No Orders!\n    </Header> :\n\n    this.state.allOrders.map(order => {\n      return (\n        <React.Fragment>\n          <Grid.Row>\n            <Grid.Column verticalAlign='middle' width='2' style={{textAlign:'center'}}>\n              <h1>{order.orderid}</h1>\n            </Grid.Column>\n            <Grid.Column width='6'>\n              {order.item.map(subitem => {\n                return (\n                  <React.Fragment>\n                    <h2 style={{margin: '0'}}>{subitem}</h2>\n                    <Divider />\n                  </React.Fragment>\n                )\n              })}\n              <h3 style={{margin: '0'}}>{order.netid}</h3>\n              <p>{order.time}</p>\n            </Grid.Column>\n            <Grid.Column width='3' verticalAlign='middle'>\n              <Button circular disabled={order.order_status} onClick={() => this.handleInProgress(order.orderid)} style={{fontFamily:'Avenir', background: '#EBD36D'}}>IN PROGRESS</Button>\n            </Grid.Column>\n            <Grid.Column width='3' verticalAlign='middle'>\n              <Button circular disabled={!order.status} onClick={() => this.handleComplete(order.orderid)} style={{fontFamily:'Avenir', background: '#85A290'}}>COMPLETE</Button>\n            </Grid.Column>\n            <Grid.Column width='2' verticalAlign='middle'>\n              {order.status ? <Header as='h3'>PAID</Header> : <Button circular onClick={() => this.handlePaid(order.orderid)}  style={{color:'white', fontFamily:'Avenir', background:'#C96148'}}>PENDING</Button>}\n            </Grid.Column>\n          </Grid.Row>\n        </React.Fragment>\n      )\n    });\n\n    return (\n      <React.Fragment>\n        <BaristaHeader history={this.props.history} />\n        <Dimmer active={this.state.loading} inverted page>\n          <Loader inverted>Loading</Loader>\n        </Dimmer>\n        <Grid stackable divided='vertically'>\n          {/*  new row for every order*/}\n          {pendingOrders}\n        </Grid>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default BaristaOrders;\n"]},"metadata":{},"sourceType":"module"}