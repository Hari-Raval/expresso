{"ast":null,"code":"import _regeneratorRuntime from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Menu,Icon,Image,Container,Header,Grid,Responsive,Dropdown,Button,Dimmer,Loader,Divider}from'semantic-ui-react';import{getHistory,clientLogout}from'../Axios/axios_getter';var CustomerHistory=/*#__PURE__*/function(_React$Component){_inherits(CustomerHistory,_React$Component);function CustomerHistory(){var _getPrototypeOf2;var _this;_classCallCheck(this,CustomerHistory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CustomerHistory)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={history:[],loading:false};_this.componentDidMount=function(){_this.setState({loading:true});_this.getHistory();var intervalFunction=setInterval(_this.getHistory,10000);_this.setState({loading:false});};_this.getHistory=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getHistory(_this.props.netid).then(function(history){_this.setState({history:history});}).catch(function(error){console.log(error);_this.setState({history:[]});});case 2:case\"end\":return _context.stop();}}},_callee);}));_this.handleLogout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return clientLogout().then(function(data){window.location.href=data.url;});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _this;}_createClass(CustomerHistory,[{key:\"render\",value:function render(){var history=this.state.history;var showHistory=history.length==0?React.createElement(Header,{as:\"h3\"},\":)\"):React.createElement(React.Fragment,null,history.map(function(history){var paymentType=history.payment?\"Student Charge\":\"In-Store\";console.log(history);return React.createElement(Grid.Row,null,React.createElement(Grid.Column,{width:\"2\"}),React.createElement(Grid.Column,{width:\"2\",verticalAlign:\"middle\"},React.createElement(\"p\",null,history.time)),React.createElement(Grid.Column,{width:\"8\",verticalAlign:\"middle\"},history.item.map(function(subitem){return React.createElement(React.Fragment,null,React.createElement(\"h2\",{style:{margin:'0'}},subitem),React.createElement(Divider,null));})),React.createElement(Grid.Column,{width:\"2\",verticalAlign:\"middle\"},React.createElement(\"h3\",null,'$'+history.cost.toFixed(2))),React.createElement(Grid.Column,{verticalAlign:\"middle\",width:\"2\"},React.createElement(\"p\",null,paymentType)));}));return React.createElement(React.Fragment,null,React.createElement(Dimmer,{active:this.state.loading,inverted:true,page:true},React.createElement(Loader,{inverted:true},\"Loading\")),React.createElement(Grid,{stackable:true,divided:\"vertically\"},React.createElement(Grid.Row,null,React.createElement(Grid.Column,{width:\"2\"}),React.createElement(Grid.Column,{width:\"12\"},React.createElement(\"h2\",null,\"Account History\")),React.createElement(Grid.Column,{width:\"2\"},React.createElement(Button,{circular:true,basic:true,color:\"black\",size:\"huge\",style:{textAlign:\"center\"},onClick:this.handleLogout},React.createElement(\"strong\",null,\"LOGOUT\")))),showHistory));}}]);return CustomerHistory;}(React.Component);export default CustomerHistory;","map":{"version":3,"sources":["/Users/spoiledhua/Desktop/expresso/frontend/src/Components/ClientHistory.js"],"names":["React","Menu","Icon","Image","Container","Header","Grid","Responsive","Dropdown","Button","Dimmer","Loader","Divider","getHistory","clientLogout","CustomerHistory","state","history","loading","componentDidMount","setState","intervalFunction","setInterval","props","netid","then","catch","error","console","log","handleLogout","data","window","location","href","url","showHistory","length","map","paymentType","payment","time","item","subitem","margin","cost","toFixed","textAlign","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Menu, Icon, Image, Container, Header, Grid, Responsive, Dropdown, Button, Dimmer, Loader, Divider } from 'semantic-ui-react';\n\nimport { getHistory, clientLogout } from '../Axios/axios_getter'\n\nclass CustomerHistory extends React.Component {\n\n  state = {\n    history: [],\n    loading: false\n  }\n\n  componentDidMount = () => {\n    this.setState({ loading: true });\n    this.getHistory();\n    let intervalFunction = setInterval(this.getHistory, 10000);\n    this.setState({ loading: false });\n  }\n\n  getHistory = async () => {\n    await getHistory(this.props.netid)\n      .then(history => {\n        this.setState({ history: history });\n      })\n      .catch(error => {\n        console.log(error);\n        this.setState({ history: [] });\n      });\n  }\n\n  handleLogout = async () => {\n    await clientLogout()\n      .then(data => {\n        window.location.href = data.url;\n      });\n  }\n\n  render() {\n\n    const { history } = this.state;\n\n    let showHistory = (history.length == 0) ?\n    <Header as='h3'>\n      :)\n    </Header> :\n\n    <React.Fragment>\n      {history.map(history => {\n        let paymentType = (history.payment) ? \"Student Charge\" : \"In-Store\";\n        console.log(history)\n        return (\n          <Grid.Row>\n            <Grid.Column width='2'></Grid.Column>\n            <Grid.Column width='2' verticalAlign='middle'>\n              <p>{history.time}</p>\n            </Grid.Column>\n            <Grid.Column width='8' verticalAlign='middle'>\n              {history.item.map(subitem => {\n                return (\n                  <React.Fragment>\n                    <h2 style={{margin: '0'}}>{subitem}</h2>\n                    <Divider />\n                  </React.Fragment>\n                )\n              })}\n            </Grid.Column>\n            <Grid.Column width='2' verticalAlign='middle'>\n              <h3>{'$' + history.cost.toFixed(2)}</h3>\n            </Grid.Column>\n            <Grid.Column verticalAlign='middle' width='2'>\n              <p>{paymentType}</p>\n            </Grid.Column>\n          </Grid.Row>\n        )\n      })}\n    </React.Fragment>\n\n      return (\n          <React.Fragment>\n            <Dimmer active={this.state.loading} inverted page>\n              <Loader inverted>Loading</Loader>\n            </Dimmer>\n            <Grid stackable divided='vertically'>\n              <Grid.Row>\n                <Grid.Column width='2' />\n                <Grid.Column width='12' >\n                  <h2>Account History</h2>\n                </Grid.Column>\n                <Grid.Column width='2'>\n                  <Button circular basic color='black' size='huge' style={{textAlign: \"center\"}} onClick={this.handleLogout}>\n                    <strong>LOGOUT</strong>\n                  </Button>\n                </Grid.Column>\n              </Grid.Row>\n              {showHistory}\n            </Grid>\n          </React.Fragment>\n\n        );\n    }\n}\n\nexport default CustomerHistory\n"]},"metadata":{},"sourceType":"module"}