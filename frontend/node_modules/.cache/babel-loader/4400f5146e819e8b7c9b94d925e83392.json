{"ast":null,"code":"import _regeneratorRuntime from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/spoiledhua/Desktop/expresso/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Menu,Icon,Image,Container,Header,Dimmer,Loader,Responsive,Dropdown,Card,Button}from'semantic-ui-react';import MenuPage from'./MenuPage';import OrderPage from'./OrderPage';import ClientHistory from'./ClientHistory';import*as logo from'../Assets/logo.png';import{postMakeOrder}from'../Axios/axios_getter';import{getUser,authenticate,clientLogout}from'../Axios/axios_getter';var ClientHeader=/*#__PURE__*/function(_React$Component){_inherits(ClientHeader,_React$Component);function ClientHeader(){var _getPrototypeOf2;var _this;_classCallCheck(this,ClientHeader);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ClientHeader)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={selectedPage:'MenuPage',shoppingCart:[],id:0,loading:false,user:null,userLogoutConfirm:false,availabilityConfirm:false};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getUser().then(function(user){if(user.user==null){authenticate().then(function(data){window.location.href=data.url;});}else{_this.setState({user:user.user});}});case 1:case\"end\":return _context.stop();}}},_callee);}));_this.getPrice=function(){var shoppingCart=_this.state.shoppingCart;var price=0;for(var i=0;i<shoppingCart.length;i++){price+=Number(shoppingCart[i].sp[1]);for(var j=0;j<shoppingCart[i].addons.length;j++){price+=Number(shoppingCart[i].addons[j].price);}}return price;};_this.handleMenuItemClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.setState({loading:true});case 2:_context2.next=4;return setTimeout(function(){_this.setState({selectedPage:'MenuPage'});},1000);case 4:_context2.next=6;return _this.setState({loading:false});case 6:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleOrderItemClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.setState({loading:true});case 2:_context3.next=4;return setTimeout(function(){_this.setState({selectedPage:'OrderPage'});},1000);case 4:_context3.next=6;return _this.setState({loading:false});case 6:case\"end\":return _context3.stop();}}},_callee3);}));_this.handleUserItemClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.setState({loading:true});case 2:_context4.next=4;return setTimeout(function(){_this.setState({selectedPage:'User'});},1000);case 4:_context4.next=6;return _this.setState({loading:false});case 6:case\"end\":return _context4.stop();}}},_callee4);}));_this.handleLogoClick=function(){_this.props.history.push('/landing');};_this.handleItemSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(item){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this.setState({loading:true});case 2:item.id=_this.state.id;_context5.next=5;return _this.setState({id:_this.state.id+1});case 5:_context5.next=7;return _this.setState(function(prevState){var shoppingCart=prevState.shoppingCart;shoppingCart.push(item);return{shoppingCart:shoppingCart};});case 7:_context5.next=9;return _this.setState({loading:false});case 9:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x){return _ref5.apply(this,arguments);};}();_this.handleRemoveItem=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _this.setState({loading:true});case 2:_context6.next=4;return _this.setState(function(prevState){var shoppingCart=prevState.shoppingCart;shoppingCart=shoppingCart.filter(function(item){return item.id!==id;});return{shoppingCart:shoppingCart};});case 4:_context6.next=6;return _this.setState({loading:false});case 6:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x2){return _ref6.apply(this,arguments);};}();_this.emptyCart=function(){_this.setState({shoppingCart:[]});};_this.postOrder=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(payment){var shoppingCart,items,i,item,addons,j,addon,update,finalUpdate;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:shoppingCart=_this.state.shoppingCart;_context7.next=3;return _this.setState({loading:true});case 3:items=[];for(i=0;i<shoppingCart.length;i++){item=shoppingCart[i];addons=[];for(j=0;j<item.addons.length;j++){addon={name:item.addons[j].name};addons.push(addon);}update={item:{name:item.item.name},addons:addons,sp:item.sp[0]};items.push(update);}finalUpdate={netid:_this.state.user,cost:_this.getPrice(),payment:payment,status:payment,items:items};postMakeOrder(_this.state.user,finalUpdate).then(function(data){if(!data.availability){_this.setState({availabilityConfirm:true});}});_context7.next=9;return _this.setState({loading:false});case 9:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x3){return _ref7.apply(this,arguments);};}();_this.handleUserLogout=function(){_this.setState({userLogoutConfirm:true});};_this.handleUserLogoutCancel=function(){_this.setState({userLogoutConfirm:false});};_this.handleUserLogoutConfirm=function(){clientLogout().then(function(data){window.location.href=data.url;});};_this.handleAvailabilityCancel=function(){_this.setState({availabilityConfirm:false});_this.setState({selectedPage:'MenuPage'});};_this.redirect=function(){_this.setState({selectedPage:'MenuPage'});};return _this;}_createClass(ClientHeader,[{key:\"render\",value:function render(){var appPages={'MenuPage':React.createElement(MenuPage,{handleItemSubmit:this.handleItemSubmit}),'OrderPage':React.createElement(OrderPage,{shoppingCart:this.state.shoppingCart,handleRemoveItem:this.handleRemoveItem,emptyCart:this.emptyCart,postOrder:this.postOrder,redirect:this.redirect}),'User':React.createElement(ClientHistory,{netid:this.state.user})};return React.createElement(React.Fragment,null,React.createElement(Dimmer,{active:this.state.loading,page:true,inverted:true},React.createElement(Loader,{inverted:true},\"Loading\")),React.createElement(Dimmer,{active:this.state.userLogoutConfirm,onClickOutside:this.handleUserLogoutCancel,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\"},\"Are you sure you want to logout?\")),React.createElement(Button.Group,null,React.createElement(Button,{onClick:this.handleUserLogoutCancel},\"Cancel\"),React.createElement(Button,{positive:true,onClick:this.handleUserLogoutConfirm},\"Logout\"))))),React.createElement(Dimmer,{active:this.state.availabilityConfirm,onClickOutside:this.handleAvailabilityCancel,page:true},React.createElement(Container,{style:{width:'720px'}},React.createElement(Card,{fluid:true},React.createElement(Card.Content,null,React.createElement(Header,{as:\"h3\",color:\"grey\"},\"Sorry, but one of the items in your cart is out of stock; your order wasn't placed. The menu will be refreshed. Please update your cart accordingly.\")),React.createElement(Button.Group,null,React.createElement(Button,{onClick:this.handleAvailabilityCancel},\"Exit\"))))),React.createElement(Responsive,{minWidth:Responsive.onlyTablet.minWidth},React.createElement(Menu,{inverted:true,fixed:\"top\",fluid:true,widths:\"7\",secondary:true,style:{height:'7vh',background:'#F98F69'}},React.createElement(Menu.Item,{style:{cursor:'pointer'},onClick:this.handleMenuItemClick},React.createElement(Header,{as:\"h3\",style:{cursor:'pointer'}},React.createElement(Icon,{name:\"th list\"}),\"Menu\")),React.createElement(Menu.Item,{style:{cursor:'pointer'},onClick:this.handleOrderItemClick},React.createElement(Header,{as:\"h3\"},React.createElement(Icon,{name:\"cart\"}),\"My Cart\")),React.createElement(Menu.Item,null),React.createElement(Menu.Item,null,React.createElement(Image,{src:logo,onClick:this.handleLogoClick,size:\"mini\",style:{cursor:'pointer'}})),React.createElement(Menu.Item,null),React.createElement(Menu.Item,null),React.createElement(Menu.Item,{position:\"right\"},React.createElement(Header,{as:\"h3\"},'Hello, '+this.state.user,React.createElement(Dropdown,null,React.createElement(Dropdown.Menu,{direction:\"left\",style:{background:'#F98F69'}},React.createElement(Dropdown.Item,{onClick:this.handleUserItemClick},React.createElement(Header,{as:\"h3\"},React.createElement(Icon,{name:\"user\"}),\"History\")),React.createElement(Dropdown.Item,{onClick:this.handleUserLogout},React.createElement(Header,{as:\"h3\"},React.createElement(Icon,{name:\"sign-out\"}),\"Logout\")))))))),React.createElement(Responsive,Responsive.onlyMobile,React.createElement(Menu,{inverted:true,fixed:\"top\",fluid:true,widths:\"7\",secondary:true,style:{height:'7vh',background:'#F98F69'}},React.createElement(Menu.Item,{position:\"left\"},React.createElement(Image,{src:logo,size:\"mini\",style:{cursor:'pointer'},onClick:this.handleLogoItemClick})),React.createElement(Menu.Item,{position:\"right\"},React.createElement(Dropdown,{icon:\"sidebar\",style:{color:'black'}},React.createElement(Dropdown.Menu,{direction:\"left\",style:{background:'#F98F69'}},React.createElement(Dropdown.Item,{style:{cursor:'pointer'},onClick:this.handleMenuItemClick},React.createElement(Header,null,React.createElement(Icon,{name:\"th list\"}),\"Menu\")),React.createElement(Dropdown.Item,{style:{cursor:'pointer'},onClick:this.handleOrderItemClick},React.createElement(Header,{as:\"h3\"},React.createElement(Icon,{name:\"cart\"}),\"My Cart\")),React.createElement(Dropdown.Item,{style:{cursor:'pointer'},onClick:this.handleUserItemClick},React.createElement(Header,{as:\"h3\"},React.createElement(Icon,{name:\"user\"}),\"History\")),React.createElement(Dropdown.Item,{style:{cursor:'pointer'},onClick:this.handleUserLogout},React.createElement(Header,{as:\"h3\"},React.createElement(Icon,{name:\"sign-out\"}),\"Logout\"))))))),React.createElement(\"div\",{style:{height:'15vh'}}),appPages[this.state.selectedPage]);}}]);return ClientHeader;}(React.Component);export default ClientHeader;","map":{"version":3,"sources":["/Users/spoiledhua/Desktop/expresso/frontend/src/Components/ClientHeader.js"],"names":["React","Menu","Icon","Image","Container","Header","Dimmer","Loader","Responsive","Dropdown","Card","Button","MenuPage","OrderPage","ClientHistory","logo","postMakeOrder","getUser","authenticate","clientLogout","ClientHeader","state","selectedPage","shoppingCart","id","loading","user","userLogoutConfirm","availabilityConfirm","componentDidMount","then","data","window","location","href","url","setState","getPrice","price","i","length","Number","sp","j","addons","handleMenuItemClick","setTimeout","handleOrderItemClick","handleUserItemClick","handleLogoClick","props","history","push","handleItemSubmit","item","prevState","handleRemoveItem","filter","emptyCart","postOrder","payment","items","addon","name","update","finalUpdate","netid","cost","status","availability","handleUserLogout","handleUserLogoutCancel","handleUserLogoutConfirm","handleAvailabilityCancel","redirect","appPages","width","onlyTablet","minWidth","height","background","cursor","onlyMobile","handleLogoItemClick","color","Component"],"mappings":"ynCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,IAAf,CAAqBC,KAArB,CAA4BC,SAA5B,CAAuCC,MAAvC,CAA+CC,MAA/C,CAAuDC,MAAvD,CAA+DC,UAA/D,CAA2EC,QAA3E,CAAqFC,IAArF,CAA2FC,MAA3F,KAAyG,mBAAzG,CAEA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CAEA,MAAO,GAAKC,CAAAA,IAAZ,KAAsB,oBAAtB,CACA,OAASC,aAAT,KAA8B,uBAA9B,CACA,OAASC,OAAT,CAAkBC,YAAlB,CAAgCC,YAAhC,KAAoD,uBAApD,C,GAEMC,CAAAA,Y,maAEJC,K,CAAQ,CACNC,YAAY,CAAE,UADR,CAENC,YAAY,CAAE,EAFR,CAGNC,EAAE,CAAE,CAHE,CAINC,OAAO,CAAE,KAJH,CAKNC,IAAI,CAAE,IALA,CAMNC,iBAAiB,CAAE,KANb,CAONC,mBAAmB,CAAE,KAPf,C,OAURC,iB,sEAAoB,mIAClBZ,OAAO,GACJa,IADH,CACQ,SAAAJ,IAAI,CAAI,CACZ,GAAIA,IAAI,CAACA,IAAL,EAAa,IAAjB,CAAuB,CACrBR,YAAY,GACTY,IADH,CACQ,SAAAC,IAAI,CAAI,CACZC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBH,IAAI,CAACI,GAA5B,CACD,CAHH,EAID,CALD,IAMK,CACH,MAAKC,QAAL,CAAc,CAAEV,IAAI,CAAEA,IAAI,CAACA,IAAb,CAAd,EACD,CACF,CAXH,EADkB,sD,SAepBW,Q,CAAW,UAAM,IACTd,CAAAA,YADS,CACQ,MAAKF,KADb,CACTE,YADS,CAEf,GAAIe,CAAAA,KAAK,CAAG,CAAZ,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGhB,YAAY,CAACiB,MAAjC,CAAyCD,CAAC,EAA1C,CAA8C,CAC5CD,KAAK,EAAIG,MAAM,CAAClB,YAAY,CAACgB,CAAD,CAAZ,CAAgBG,EAAhB,CAAmB,CAAnB,CAAD,CAAf,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGpB,YAAY,CAACgB,CAAD,CAAZ,CAAgBK,MAAhB,CAAuBJ,MAA3C,CAAmDG,CAAC,EAApD,CAAwD,CACtDL,KAAK,EAAIG,MAAM,CAAClB,YAAY,CAACgB,CAAD,CAAZ,CAAgBK,MAAhB,CAAuBD,CAAvB,EAA0BL,KAA3B,CAAf,CACD,CACF,CACD,MAAOA,CAAAA,KAAP,CACD,C,OAEDO,mB,sEAAsB,+JAEd,OAAKT,QAAL,CAAc,CAAEX,OAAO,CAAE,IAAX,CAAd,CAFc,+BAGdqB,CAAAA,UAAU,CAAC,UAAM,CAAE,MAAKV,QAAL,CAAc,CAAEd,YAAY,CAAE,UAAhB,CAAd,EAA6C,CAAtD,CAAwD,IAAxD,CAHI,+BAId,OAAKc,QAAL,CAAc,CAAEX,OAAO,CAAE,KAAX,CAAd,CAJc,yD,SAOtBsB,oB,sEAAuB,+JAEf,OAAKX,QAAL,CAAc,CAAEX,OAAO,CAAE,IAAX,CAAd,CAFe,+BAGfqB,CAAAA,UAAU,CAAC,UAAM,CAAE,MAAKV,QAAL,CAAc,CAAEd,YAAY,CAAE,WAAhB,CAAd,EAA8C,CAAvD,CAAyD,IAAzD,CAHK,+BAIf,OAAKc,QAAL,CAAc,CAAEX,OAAO,CAAE,KAAX,CAAd,CAJe,yD,SAOvBuB,mB,sEAAsB,+JAEd,OAAKZ,QAAL,CAAc,CAAEX,OAAO,CAAE,IAAX,CAAd,CAFc,+BAGdqB,CAAAA,UAAU,CAAC,UAAM,CAAE,MAAKV,QAAL,CAAc,CAAEd,YAAY,CAAE,MAAhB,CAAd,EAAyC,CAAlD,CAAoD,IAApD,CAHI,+BAId,OAAKc,QAAL,CAAc,CAAEX,OAAO,CAAE,KAAX,CAAd,CAJc,yD,SAOtBwB,e,CAAkB,UAAM,CACtB,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB,EACD,C,OAEDC,gB,2FAAmB,kBAAOC,IAAP,6IACX,OAAKlB,QAAL,CAAc,CAAEX,OAAO,CAAE,IAAX,CAAd,CADW,QAEjB6B,IAAI,CAAC9B,EAAL,CAAU,MAAKH,KAAL,CAAWG,EAArB,CAFiB,uBAGX,OAAKY,QAAL,CAAc,CAAEZ,EAAE,CAAE,MAAKH,KAAL,CAAWG,EAAX,CAAgB,CAAtB,CAAd,CAHW,+BAIX,OAAKY,QAAL,CAAc,SAAAmB,SAAS,CAAI,CAC/B,GAAIhC,CAAAA,YAAY,CAAGgC,SAAS,CAAChC,YAA7B,CACAA,YAAY,CAAC6B,IAAb,CAAkBE,IAAlB,EACA,MAAO,CAAE/B,YAAY,CAAZA,YAAF,CAAP,CACD,CAJK,CAJW,+BASX,OAAKa,QAAL,CAAc,CAAEX,OAAO,CAAE,KAAX,CAAd,CATW,yD,sEAYnB+B,gB,2FAAmB,kBAAOhC,EAAP,6IACX,OAAKY,QAAL,CAAc,CAAEX,OAAO,CAAE,IAAX,CAAd,CADW,+BAEX,OAAKW,QAAL,CAAc,SAAAmB,SAAS,CAAI,CAC/B,GAAIhC,CAAAA,YAAY,CAAGgC,SAAS,CAAChC,YAA7B,CACAA,YAAY,CAAGA,YAAY,CAACkC,MAAb,CAAoB,SAAAH,IAAI,QAAIA,CAAAA,IAAI,CAAC9B,EAAL,GAAYA,EAAhB,EAAxB,CAAf,CACA,MAAO,CAAED,YAAY,CAAZA,YAAF,CAAP,CACD,CAJK,CAFW,+BAOX,OAAKa,QAAL,CAAc,CAAEX,OAAO,CAAE,KAAX,CAAd,CAPW,yD,uEAUnBiC,S,CAAY,UAAM,CAChB,MAAKtB,QAAL,CAAc,CAAEb,YAAY,CAAE,EAAhB,CAAd,EACD,C,OAEDoC,S,2FAAY,kBAAOC,OAAP,sLAEFrC,YAFE,CAEe,MAAKF,KAFpB,CAEFE,YAFE,wBAIJ,OAAKa,QAAL,CAAc,CAAEX,OAAO,CAAE,IAAX,CAAd,CAJI,QAMNoC,KANM,CAME,EANF,CAOV,IAAStB,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGhB,YAAY,CAACiB,MAAjC,CAAyCD,CAAC,EAA1C,CAA8C,CACtCe,IADsC,CAC/B/B,YAAY,CAACgB,CAAD,CADmB,CAExCK,MAFwC,CAE/B,EAF+B,CAG5C,IAASD,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGW,IAAI,CAACV,MAAL,CAAYJ,MAAhC,CAAwCG,CAAC,EAAzC,CAA6C,CACrCmB,KADqC,CAC7B,CAAEC,IAAI,CAAET,IAAI,CAACV,MAAL,CAAYD,CAAZ,EAAeoB,IAAvB,CAD6B,CAE3CnB,MAAM,CAACQ,IAAP,CAAYU,KAAZ,EACD,CACKE,MAPsC,CAO7B,CACbV,IAAI,CAAE,CAAES,IAAI,CAAET,IAAI,CAACA,IAAL,CAAUS,IAAlB,CADO,CAEbnB,MAAM,CAAEA,MAFK,CAGbF,EAAE,CAAEY,IAAI,CAACZ,EAAL,CAAQ,CAAR,CAHS,CAP6B,CAY5CmB,KAAK,CAACT,IAAN,CAAWY,MAAX,EACD,CAEKC,WAtBI,CAsBU,CAClBC,KAAK,CAAE,MAAK7C,KAAL,CAAWK,IADA,CAElByC,IAAI,CAAE,MAAK9B,QAAL,EAFY,CAGlBuB,OAAO,CAAEA,OAHS,CAIlBQ,MAAM,CAAER,OAJU,CAKlBC,KAAK,CAAEA,KALW,CAtBV,CA6BV7C,aAAa,CAAC,MAAKK,KAAL,CAAWK,IAAZ,CAAkBuC,WAAlB,CAAb,CACGnC,IADH,CACQ,SAAAC,IAAI,CAAI,CACZ,GAAI,CAACA,IAAI,CAACsC,YAAV,CAAwB,CACtB,MAAKjC,QAAL,CAAc,CAAER,mBAAmB,CAAE,IAAvB,CAAd,EACD,CACF,CALH,EA7BU,uBAmCJ,OAAKQ,QAAL,CAAc,CAAEX,OAAO,CAAE,KAAX,CAAd,CAnCI,yD,uEAsCZ6C,gB,CAAmB,UAAM,CACvB,MAAKlC,QAAL,CAAc,CAAET,iBAAiB,CAAE,IAArB,CAAd,EACD,C,OAED4C,sB,CAAyB,UAAM,CAC7B,MAAKnC,QAAL,CAAc,CAAET,iBAAiB,CAAE,KAArB,CAAd,EACD,C,OAED6C,uB,CAA0B,UAAM,CAC9BrD,YAAY,GACTW,IADH,CACQ,SAAAC,IAAI,CAAI,CACZC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBH,IAAI,CAACI,GAA5B,CACD,CAHH,EAID,C,OAEDsC,wB,CAA2B,UAAM,CAC/B,MAAKrC,QAAL,CAAc,CAAER,mBAAmB,CAAE,KAAvB,CAAd,EACA,MAAKQ,QAAL,CAAc,CAAEd,YAAY,CAAE,UAAhB,CAAd,EACD,C,OAEDoD,Q,CAAW,UAAM,CACf,MAAKtC,QAAL,CAAc,CAAEd,YAAY,CAAE,UAAhB,CAAd,EACD,C,+EAEQ,CAEP,GAAIqD,CAAAA,QAAQ,CAAG,CACb,WAAY,oBAAC,QAAD,EAAU,gBAAgB,CAAE,KAAKtB,gBAAjC,EADC,CAEb,YAAa,oBAAC,SAAD,EAAW,YAAY,CAAE,KAAKhC,KAAL,CAAWE,YAApC,CAAkD,gBAAgB,CAAE,KAAKiC,gBAAzE,CAA2F,SAAS,CAAE,KAAKE,SAA3G,CAAsH,SAAS,CAAE,KAAKC,SAAtI,CAAiJ,QAAQ,CAAE,KAAKe,QAAhK,EAFA,CAGb,OAAQ,oBAAC,aAAD,EAAe,KAAK,CAAE,KAAKrD,KAAL,CAAWK,IAAjC,EAHK,CAAf,CAMA,MAEE,qBAAC,KAAD,CAAO,QAAP,MACE,oBAAC,MAAD,EAAQ,MAAM,CAAE,KAAKL,KAAL,CAAWI,OAA3B,CAAoC,IAAI,KAAxC,CAAyC,QAAQ,KAAjD,EACE,oBAAC,MAAD,EAAQ,QAAQ,KAAhB,YADF,CADF,CAIE,oBAAC,MAAD,EAAQ,MAAM,CAAE,KAAKJ,KAAL,CAAWM,iBAA3B,CAA8C,cAAc,CAAE,KAAK4C,sBAAnE,CAA2F,IAAI,KAA/F,EACE,oBAAC,SAAD,EAAW,KAAK,CAAE,CAAEK,KAAK,CAAE,OAAT,CAAlB,EACE,oBAAC,IAAD,EAAM,KAAK,KAAX,EACE,oBAAC,IAAD,CAAM,OAAN,MACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,CAAgB,KAAK,CAAC,MAAtB,qCADF,CADF,CAIE,oBAAC,MAAD,CAAQ,KAAR,MACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,KAAKL,sBAAtB,WADF,CAEE,oBAAC,MAAD,EAAQ,QAAQ,KAAhB,CAAiB,OAAO,CAAE,KAAKC,uBAA/B,WAFF,CAJF,CADF,CADF,CAJF,CAiBE,oBAAC,MAAD,EAAQ,MAAM,CAAE,KAAKnD,KAAL,CAAWO,mBAA3B,CAAgD,cAAc,CAAE,KAAK6C,wBAArE,CAA+F,IAAI,KAAnG,EACE,oBAAC,SAAD,EAAW,KAAK,CAAE,CAAEG,KAAK,CAAE,OAAT,CAAlB,EACE,oBAAC,IAAD,EAAM,KAAK,KAAX,EACE,oBAAC,IAAD,CAAM,OAAN,MACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,CAAgB,KAAK,CAAC,MAAtB,yJADF,CADF,CAIE,oBAAC,MAAD,CAAQ,KAAR,MACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,KAAKH,wBAAtB,SADF,CAJF,CADF,CADF,CAjBF,CA6BE,oBAAC,UAAD,EAAY,QAAQ,CAAEjE,UAAU,CAACqE,UAAX,CAAsBC,QAA5C,EAEE,oBAAC,IAAD,EAAM,QAAQ,KAAd,CAAe,KAAK,CAAC,KAArB,CAA2B,KAAK,KAAhC,CAAiC,MAAM,CAAC,GAAxC,CAA4C,SAAS,KAArD,CAAsD,KAAK,CAAE,CAAEC,MAAM,CAAE,KAAV,CAAiBC,UAAU,CAAE,SAA7B,CAA7D,EACE,oBAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAV,CAAlB,CAAyC,OAAO,CAAE,KAAKpC,mBAAvD,EACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,CAAgB,KAAK,CAAE,CAAEoC,MAAM,CAAE,SAAV,CAAvB,EACE,oBAAC,IAAD,EAAM,IAAI,CAAC,SAAX,EADF,QADF,CADF,CAOE,oBAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAE,CAAEA,MAAM,CAAE,SAAV,CAAlB,CAAyC,OAAO,CAAE,KAAKlC,oBAAvD,EACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,EACE,oBAAC,IAAD,EAAM,IAAI,CAAC,MAAX,EADF,WADF,CAPF,CAaE,oBAAC,IAAD,CAAM,IAAN,MAbF,CAcE,oBAAC,IAAD,CAAM,IAAN,MACE,oBAAC,KAAD,EAAO,GAAG,CAAEhC,IAAZ,CAAkB,OAAO,CAAE,KAAKkC,eAAhC,CAAiD,IAAI,CAAC,MAAtD,CAA6D,KAAK,CAAE,CAAEgC,MAAM,CAAE,SAAV,CAApE,EADF,CAdF,CAiBE,oBAAC,IAAD,CAAM,IAAN,MAjBF,CAkBE,oBAAC,IAAD,CAAM,IAAN,MAlBF,CAmBE,oBAAC,IAAD,CAAM,IAAN,EAAW,QAAQ,CAAC,OAApB,EACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,EACG,UAAY,KAAK5D,KAAL,CAAWK,IAD1B,CAEE,oBAAC,QAAD,MACE,oBAAC,QAAD,CAAU,IAAV,EAAe,SAAS,CAAC,MAAzB,CAAgC,KAAK,CAAE,CAAEsD,UAAU,CAAE,SAAd,CAAvC,EACE,oBAAC,QAAD,CAAU,IAAV,EAAe,OAAO,CAAE,KAAKhC,mBAA7B,EACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,EACE,oBAAC,IAAD,EAAM,IAAI,CAAC,MAAX,EADF,WADF,CADF,CAOE,oBAAC,QAAD,CAAU,IAAV,EAAe,OAAO,CAAE,KAAKsB,gBAA7B,EACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,EACE,oBAAC,IAAD,EAAM,IAAI,CAAC,UAAX,EADF,UADF,CAPF,CADF,CAFF,CADF,CAnBF,CAFF,CA7BF,CAyEE,oBAAC,UAAD,CAAgB9D,UAAU,CAAC0E,UAA3B,CACE,oBAAC,IAAD,EAAM,QAAQ,KAAd,CAAe,KAAK,CAAC,KAArB,CAA2B,KAAK,KAAhC,CAAiC,MAAM,CAAC,GAAxC,CAA4C,SAAS,KAArD,CAAsD,KAAK,CAAE,CAAEH,MAAM,CAAE,KAAV,CAAiBC,UAAU,CAAE,SAA7B,CAA7D,EACE,oBAAC,IAAD,CAAM,IAAN,EAAW,QAAQ,CAAC,MAApB,EACE,oBAAC,KAAD,EAAO,GAAG,CAAEjE,IAAZ,CAAkB,IAAI,CAAC,MAAvB,CAA8B,KAAK,CAAE,CAAEkE,MAAM,CAAE,SAAV,CAArC,CAA4D,OAAO,CAAE,KAAKE,mBAA1E,EADF,CADF,CAIE,oBAAC,IAAD,CAAM,IAAN,EAAW,QAAQ,CAAC,OAApB,EAEE,oBAAC,QAAD,EAAU,IAAI,CAAC,SAAf,CAAyB,KAAK,CAAE,CAACC,KAAK,CAAC,OAAP,CAAhC,EACE,oBAAC,QAAD,CAAU,IAAV,EAAe,SAAS,CAAC,MAAzB,CAAgC,KAAK,CAAE,CAACJ,UAAU,CAAE,SAAb,CAAvC,EACE,oBAAC,QAAD,CAAU,IAAV,EAAe,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAV,CAAtB,CAA6C,OAAO,CAAE,KAAKpC,mBAA3D,EACE,oBAAC,MAAD,MACE,oBAAC,IAAD,EAAM,IAAI,CAAC,SAAX,EADF,QADF,CADF,CAOE,oBAAC,QAAD,CAAU,IAAV,EAAe,KAAK,CAAE,CAAEoC,MAAM,CAAE,SAAV,CAAtB,CAA6C,OAAO,CAAE,KAAKlC,oBAA3D,EACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,EACE,oBAAC,IAAD,EAAM,IAAI,CAAC,MAAX,EADF,WADF,CAPF,CAaE,oBAAC,QAAD,CAAU,IAAV,EAAe,KAAK,CAAE,CAAEkC,MAAM,CAAE,SAAV,CAAtB,CAA6C,OAAO,CAAE,KAAKjC,mBAA3D,EACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,EACE,oBAAC,IAAD,EAAM,IAAI,CAAC,MAAX,EADF,WADF,CAbF,CAmBE,oBAAC,QAAD,CAAU,IAAV,EAAe,KAAK,CAAE,CAAEiC,MAAM,CAAE,SAAV,CAAtB,CAA6C,OAAO,CAAE,KAAKX,gBAA3D,EACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,EACE,oBAAC,IAAD,EAAM,IAAI,CAAC,UAAX,EADF,UADF,CAnBF,CADF,CAFF,CAJF,CADF,CAzEF,CA+GE,2BAAK,KAAK,CAAE,CAAES,MAAM,CAAE,MAAV,CAAZ,EA/GF,CAgHGJ,QAAQ,CAAC,KAAKtD,KAAL,CAAWC,YAAZ,CAhHX,CAFF,CAqHD,C,0BArRwBtB,KAAK,CAACqF,S,EAwRjC,cAAejE,CAAAA,YAAf","sourcesContent":["import React from 'react';\nimport { Menu, Icon, Image, Container, Header, Dimmer, Loader, Responsive, Dropdown, Card, Button } from 'semantic-ui-react';\n\nimport MenuPage from './MenuPage';\nimport OrderPage from './OrderPage';\n\nimport ClientHistory from './ClientHistory';\n\nimport * as logo from '../Assets/logo.png';\nimport { postMakeOrder } from '../Axios/axios_getter';\nimport { getUser, authenticate, clientLogout } from '../Axios/axios_getter';\n\nclass ClientHeader extends React.Component {\n\n  state = {\n    selectedPage: 'MenuPage',\n    shoppingCart: [],\n    id: 0,\n    loading: false,\n    user: null,\n    userLogoutConfirm: false,\n    availabilityConfirm: false\n  }\n\n  componentDidMount = async () => {\n    getUser()\n      .then(user => {\n        if (user.user == null) {\n          authenticate()\n            .then(data => {\n              window.location.href = data.url;\n            });\n        }\n        else {\n          this.setState({ user: user.user });\n        }\n      });\n  }\n\n  getPrice = () => {\n    let { shoppingCart } = this.state;\n    let price = 0;\n    for (let i = 0; i < shoppingCart.length; i++) {\n      price += Number(shoppingCart[i].sp[1]);\n      for (let j = 0; j < shoppingCart[i].addons.length; j++) {\n        price += Number(shoppingCart[i].addons[j].price);\n      }\n    }\n    return price;\n  }\n\n  handleMenuItemClick = async () => {\n    // redirect to Menu Page\n    await this.setState({ loading: true });\n    await setTimeout(() => { this.setState({ selectedPage: 'MenuPage' }) }, 1000);\n    await this.setState({ loading: false });\n  }\n\n  handleOrderItemClick = async () => {\n    // redirect to Order page\n    await this.setState({ loading: true });\n    await setTimeout(() => { this.setState({ selectedPage: 'OrderPage' }) }, 1000);\n    await this.setState({ loading: false });\n  }\n\n  handleUserItemClick = async () => {\n    // redirect to User page\n    await this.setState({ loading: true });\n    await setTimeout(() => { this.setState({ selectedPage: 'User' }) }, 1000);\n    await this.setState({ loading: false });\n  }\n\n  handleLogoClick = () => {\n    this.props.history.push('/landing');\n  }\n\n  handleItemSubmit = async (item) => {\n    await this.setState({ loading: true });\n    item.id = this.state.id;\n    await this.setState({ id: this.state.id + 1 });\n    await this.setState(prevState => {\n      let shoppingCart = prevState.shoppingCart;\n      shoppingCart.push(item);\n      return { shoppingCart }\n    });\n    await this.setState({ loading: false });\n  }\n\n  handleRemoveItem = async (id) => {\n    await this.setState({ loading: true });\n    await this.setState(prevState => {\n      let shoppingCart = prevState.shoppingCart;\n      shoppingCart = shoppingCart.filter(item => item.id !== id);\n      return { shoppingCart }\n    });\n    await this.setState({ loading: false });\n  }\n\n  emptyCart = () => {\n    this.setState({ shoppingCart: [] });\n  }\n\n  postOrder = async (payment) => {\n\n    const { shoppingCart } = this.state;\n\n    await this.setState({ loading: true });\n\n    let items = [];\n    for (let i = 0; i < shoppingCart.length; i++) {\n      const item = shoppingCart[i];\n      let addons = []\n      for (let j = 0; j < item.addons.length; j++) {\n        const addon = { name: item.addons[j].name };\n        addons.push(addon);\n      }\n      const update = {\n        item: { name: item.item.name },\n        addons: addons,\n        sp: item.sp[0]\n      }\n      items.push(update);\n    }\n\n    const finalUpdate = {\n      netid: this.state.user,\n      cost: this.getPrice(),\n      payment: payment,\n      status: payment,\n      items: items\n    };\n    postMakeOrder(this.state.user, finalUpdate)\n      .then(data => {\n        if (!data.availability) {\n          this.setState({ availabilityConfirm: true });\n        }\n      });\n    await this.setState({ loading: false });\n  }\n\n  handleUserLogout = () => {\n    this.setState({ userLogoutConfirm: true });\n  }\n\n  handleUserLogoutCancel = () => {\n    this.setState({ userLogoutConfirm: false });\n  }\n\n  handleUserLogoutConfirm = () => {\n    clientLogout()\n      .then(data => {\n        window.location.href = data.url\n      });\n  }\n\n  handleAvailabilityCancel = () => {\n    this.setState({ availabilityConfirm: false });\n    this.setState({ selectedPage: 'MenuPage' });\n  }\n\n  redirect = () => {\n    this.setState({ selectedPage: 'MenuPage' });\n  }\n\n  render() {\n\n    var appPages = {\n      'MenuPage': <MenuPage handleItemSubmit={this.handleItemSubmit}/>,\n      'OrderPage': <OrderPage shoppingCart={this.state.shoppingCart} handleRemoveItem={this.handleRemoveItem} emptyCart={this.emptyCart} postOrder={this.postOrder} redirect={this.redirect}/>,\n      'User': <ClientHistory netid={this.state.user}/>\n    };\n\n    return (\n\n      <React.Fragment>\n        <Dimmer active={this.state.loading} page inverted>\n          <Loader inverted>Loading</Loader>\n        </Dimmer>\n        <Dimmer active={this.state.userLogoutConfirm} onClickOutside={this.handleUserLogoutCancel} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey'>Are you sure you want to logout?</Header>\n              </Card.Content>\n              <Button.Group>\n                <Button onClick={this.handleUserLogoutCancel}>Cancel</Button>\n                <Button positive onClick={this.handleUserLogoutConfirm}>Logout</Button>\n              </Button.Group>\n            </Card>\n          </Container>\n        </Dimmer>\n        <Dimmer active={this.state.availabilityConfirm} onClickOutside={this.handleAvailabilityCancel} page>\n          <Container style={{ width: '720px' }}>\n            <Card fluid>\n              <Card.Content>\n                <Header as='h3' color='grey'>Sorry, but one of the items in your cart is out of stock; your order wasn't placed. The menu will be refreshed. Please update your cart accordingly.</Header>\n              </Card.Content>\n              <Button.Group>\n                <Button onClick={this.handleAvailabilityCancel}>Exit</Button>\n              </Button.Group>\n            </Card>\n          </Container>\n        </Dimmer>\n        <Responsive minWidth={Responsive.onlyTablet.minWidth}>\n          {/* Top Menu */}\n          <Menu inverted fixed=\"top\" fluid widths='7' secondary style={{ height: '7vh', background: '#F98F69' }}>\n            <Menu.Item style={{ cursor: 'pointer' }} onClick={this.handleMenuItemClick}>\n              <Header as='h3' style={{ cursor: 'pointer' }}>\n                <Icon name='th list'/>\n                Menu\n              </Header>\n            </Menu.Item>\n            <Menu.Item style={{ cursor: 'pointer' }} onClick={this.handleOrderItemClick}>\n              <Header as='h3'>\n                <Icon name='cart'/>\n                My Cart\n              </Header>\n            </Menu.Item>\n            <Menu.Item />\n            <Menu.Item>\n              <Image src={logo} onClick={this.handleLogoClick} size='mini' style={{ cursor: 'pointer' }} />\n            </Menu.Item>\n            <Menu.Item />\n            <Menu.Item />\n            <Menu.Item position='right'>\n              <Header as='h3'>\n                {'Hello, ' + this.state.user}\n                <Dropdown>\n                  <Dropdown.Menu direction='left' style={{ background: '#F98F69' }}>\n                    <Dropdown.Item onClick={this.handleUserItemClick}>\n                      <Header as='h3'>\n                        <Icon name='user' />\n                        History\n                      </Header>\n                    </Dropdown.Item>\n                    <Dropdown.Item onClick={this.handleUserLogout}>\n                      <Header as='h3'>\n                        <Icon name='sign-out' />\n                        Logout\n                      </Header>\n                    </Dropdown.Item>\n                  </Dropdown.Menu>\n                </Dropdown>\n              </Header>\n            </Menu.Item>\n          </Menu>\n        </Responsive>\n        <Responsive {...Responsive.onlyMobile}>\n          <Menu inverted fixed=\"top\" fluid widths='7' secondary style={{ height: '7vh', background: '#F98F69' }}>\n            <Menu.Item position='left'>\n              <Image src={logo} size='mini' style={{ cursor: 'pointer' }} onClick={this.handleLogoItemClick}/>\n            </Menu.Item>\n            <Menu.Item position='right'>\n              {/* Dropdown menu */}\n              <Dropdown icon='sidebar' style={{color:'black'}}>\n                <Dropdown.Menu direction='left' style={{background: '#F98F69' }}>\n                  <Dropdown.Item style={{ cursor: 'pointer' }} onClick={this.handleMenuItemClick}>\n                    <Header>\n                      <Icon name='th list'/>\n                      Menu\n                    </Header>\n                  </Dropdown.Item>\n                  <Dropdown.Item style={{ cursor: 'pointer' }} onClick={this.handleOrderItemClick}>\n                    <Header as='h3'>\n                      <Icon name='cart'/>\n                      My Cart\n                    </Header>\n                  </Dropdown.Item>\n                  <Dropdown.Item style={{ cursor: 'pointer' }} onClick={this.handleUserItemClick}>\n                    <Header as='h3'>\n                      <Icon name='user'/>\n                      History\n                    </Header>\n                  </Dropdown.Item>\n                  <Dropdown.Item style={{ cursor: 'pointer' }} onClick={this.handleUserLogout}>\n                    <Header as='h3'>\n                      <Icon name='sign-out' />\n                      Logout\n                    </Header>\n                  </Dropdown.Item>\n                </Dropdown.Menu>\n              </Dropdown>\n            </Menu.Item>\n          </Menu>\n        </Responsive>\n        <div style={{ height: '15vh' }} />\n        {appPages[this.state.selectedPage]}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ClientHeader;\n"]},"metadata":{},"sourceType":"module"}